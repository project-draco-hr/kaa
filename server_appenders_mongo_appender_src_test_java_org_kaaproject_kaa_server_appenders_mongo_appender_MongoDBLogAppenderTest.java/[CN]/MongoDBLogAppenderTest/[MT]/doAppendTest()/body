{
  List<LogEvent> events=new ArrayList<>();
  LogEvent event1=new LogEvent();
  event1.setLogData(LOG_DATA.getBytes(UTF_8));
  LogEvent event2=new LogEvent();
  event2.setLogData(LOG_DATA.getBytes(UTF_8));
  LogEvent event3=new LogEvent();
  event3.setLogData(LOG_DATA.getBytes(UTF_8));
  events.add(event1);
  events.add(event2);
  events.add(event3);
  LogSchemaDto dto=new LogSchemaDto();
  dto.setSchema(EMPTY_SCHEMA);
  dto.setMajorVersion(1);
  LogSchema schema=new LogSchema(dto);
  int version=dto.getMajorVersion();
  LogEventPack logEventPack=new LogEventPack(ENDPOINT_KEY,DATE_CREATED,schema,events);
  logEventPack.setLogSchemaVersion(version);
  Map<String,GenericAvroConverter<GenericRecord>> converters=new HashMap<>();
  GenericAvroConverter<GenericRecord> converter=new GenericAvroConverter<GenericRecord>(dto.getSchema()){
    @Override public GenericRecord decodeBinary(    byte[] bytes){
      return null;
    }
    @Override public String endcodeToJson(    GenericRecord record){
      return LOG_DATA;
    }
  }
;
  converters.put(dto.getSchema(),converter);
  ReflectionTestUtils.setField(logAppender,"converters",converters);
  String collectionName=(String)ReflectionTestUtils.getField(logAppender,"collectionName");
  Assert.assertEquals(0,MongoDBTestRunner.getDB().getCollection(collectionName).count());
  logAppender.doAppend(logEventPack);
  collectionName=(String)ReflectionTestUtils.getField(logAppender,"collectionName");
  Assert.assertEquals(3,MongoDBTestRunner.getDB().getCollection(collectionName).count());
}
