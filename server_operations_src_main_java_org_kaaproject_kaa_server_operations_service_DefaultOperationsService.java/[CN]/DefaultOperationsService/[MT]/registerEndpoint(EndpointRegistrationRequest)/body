{
  LOG.debug("register endpoint. request: {}",request);
  String applicationToken=request.getApplicationToken().toString();
  byte[] endpointKey=toByteArray(request.getEndpointPublicKey());
  byte[] profileBody=toByteArray(request.getProfileBody());
  RegisterProfileRequest registerProfileRequest=new RegisterProfileRequest(applicationToken,endpointKey,request.getVersionInfo(),profileBody);
  EndpointProfileDto endpointProfile=profileService.registerProfile(registerProfileRequest);
  LOG.debug("profile registered. id: {}, endpointKeyHash: {}",endpointProfile.getId(),endpointProfile.getEndpointKeyHash());
  SyncResponseHolder response=processSync(toSyncRequest(request.getApplicationToken(),endpointProfile),endpointProfile,true);
  LOG.debug("register endpoint. response: {}",response);
  return response;
}
