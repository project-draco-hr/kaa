{
  mAlbumsMap.clear();
  Uri uri=MediaStore.Images.Media.EXTERNAL_CONTENT_URI;
  String[] projection={MediaStore.Images.Media.BUCKET_ID,MediaStore.Images.Media.BUCKET_DISPLAY_NAME};
  Cursor cursor=mContext.getContentResolver().query(uri,projection,null,null,null);
  if (cursor != null) {
    try {
      int idIndex=cursor.getColumnIndex(MediaStore.Images.Media.BUCKET_ID);
      int titleIndex=cursor.getColumnIndex(MediaStore.Images.Media.BUCKET_DISPLAY_NAME);
      while (cursor.moveToNext()) {
        String id=cursor.getString(idIndex);
        if (!mAlbumsMap.containsKey(id)) {
          AlbumInfo album=new AlbumInfo();
          album.setBucketId(id);
          album.setTitle(cursor.getString(titleIndex));
          album.setImageCount(1);
          mAlbumsMap.put(id,album);
        }
 else {
          AlbumInfo album=mAlbumsMap.get(id);
          int imageCount=album.getImageCount();
          imageCount++;
          album.setImageCount(imageCount);
        }
      }
    }
  finally {
      cursor.close();
    }
  }
}
