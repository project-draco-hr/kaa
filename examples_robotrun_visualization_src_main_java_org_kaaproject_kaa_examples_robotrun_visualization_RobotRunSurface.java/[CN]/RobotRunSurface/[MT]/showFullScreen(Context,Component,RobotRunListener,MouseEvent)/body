{
  GraphicsEnvironment env=GraphicsEnvironment.getLocalGraphicsEnvironment();
  GraphicsDevice[] devices=env.getScreenDevices();
  Point point=e.getLocationOnScreen();
  GraphicsDevice currentDevice=null;
  for (  GraphicsDevice device : devices) {
    GraphicsConfiguration[] configurations=device.getConfigurations();
    for (    GraphicsConfiguration config : configurations) {
      Rectangle gcBounds=config.getBounds();
      if (gcBounds.contains(point)) {
        currentDevice=device;
        break;
      }
    }
    if (currentDevice != null) {
      break;
    }
  }
  if (currentDevice == null) {
    currentDevice=env.getDefaultScreenDevice();
  }
  boolean isFullScreen=currentDevice != null && currentDevice.isFullScreenSupported();
  JFrame frame=prepareFrame(context,comp,listener);
  frame.setUndecorated(isFullScreen);
  frame.setResizable(!isFullScreen);
  installEscapeCloseOperation(frame,currentDevice,isFullScreen);
  if (isFullScreen) {
    currentDevice.setFullScreenWindow(frame);
    frame.validate();
  }
 else {
    frame.setExtendedState(JFrame.MAXIMIZED_BOTH);
    frame.setVisible(true);
  }
}
