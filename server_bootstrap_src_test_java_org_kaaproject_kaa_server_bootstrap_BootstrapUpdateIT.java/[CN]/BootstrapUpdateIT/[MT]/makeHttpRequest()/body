{
  PublicKey serverPublicKey=bootstrap.getBootstrapInitializationService().getKeyStoreService().getPublicKey();
  final Object httpSync=new Object();
  testFailed=true;
  TestClient client;
  try {
    client=new TestClient(nettyHost,nettyPort,serverPublicKey,new HttpActivity(){
      @Override public void httpRequestComplete(      Exception e,      int id,      OperationsServerList response){
        if (e != null) {
          fail(e.toString());
        }
synchronized (httpSync) {
          testFailed=false;
          httpSync.notify();
        }
      }
    }
);
    executor.execute(client);
  }
 catch (  IOException e) {
    fail(e.toString());
  }
synchronized (httpSync) {
    try {
      httpSync.wait(10000);
    }
 catch (    InterruptedException e) {
      fail(e.toString());
    }
  }
  if (testFailed) {
    fail("Test KaaTcp failed");
  }
}
