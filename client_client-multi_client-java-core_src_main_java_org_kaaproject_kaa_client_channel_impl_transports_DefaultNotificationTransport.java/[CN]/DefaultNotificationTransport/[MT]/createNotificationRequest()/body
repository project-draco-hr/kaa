{
  if (clientState != null && manager != null) {
    NotificationSyncRequest request=new NotificationSyncRequest();
    request.setAppStateSeqNumber(clientState.getNotificationSeqNumber());
    if (!acceptedUnicastNotificationIds.isEmpty()) {
      LOG.info("Accepted unicast Notifications: {}",acceptedUnicastNotificationIds.size());
      request.setAcceptedUnicastNotifications(new ArrayList<>(acceptedUnicastNotificationIds));
    }
    sentNotificationCommands.addAll(manager.releaseSubscriptionCommands());
    request.setSubscriptionCommands(sentNotificationCommands);
    request.setTopicStates(getTopicStates());
    return request;
  }
  return null;
}
