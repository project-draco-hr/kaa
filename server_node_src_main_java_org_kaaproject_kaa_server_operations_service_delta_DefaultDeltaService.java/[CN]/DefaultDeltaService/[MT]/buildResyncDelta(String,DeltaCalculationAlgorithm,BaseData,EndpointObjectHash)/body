{
  try {
    LOG.debug("[{}] Calculating full resync delta from configuration: {}",endpointId,mergedConfiguration);
    RawBinaryDelta delta=deltaCalculator.calculate(mergedConfiguration);
    return new ConfigurationCacheEntry(mergedConfiguration.getRawData().getBytes(),delta,EndpointObjectHash.fromSHA1(delta.getData()),userConfigurationHash);
  }
 catch (  IOException|DeltaCalculatorException e) {
    throw new GetDeltaException(e);
  }
}
