{
  if (manager != null) {
    if (!isEventSNSynchronized && response.getEventSequenceNumberResponse() != null) {
      int lastSN=response.getEventSequenceNumberResponse().getSeqNum();
      int expectedSN=(lastSN > 0 ? lastSN + 1 : lastSN);
      if (startEventSN != expectedSN) {
        startEventSN=expectedSN;
        clientState.setEventSeqNum(startEventSN);
        Set<Event> eventsSet=new HashSet<Event>();
        for (        Set<Event> events : pendingEvents.values()) {
          eventsSet.addAll(events);
        }
        eventsSet.addAll(manager.getPendingEvents());
        List<Event> events=new ArrayList<Event>(eventsSet);
        Collections.sort(events,eventSeqNumberComparator);
        clientState.setEventSeqNum(startEventSN + events.size());
        if (!events.isEmpty() && events.get(0).getSeqNum() != startEventSN) {
          LOG.info("Put in order event sequence numbers (expected: {}, actual: {})",startEventSN,events.get(0).getSeqNum());
          for (          Event e : events) {
            e.setSeqNum(startEventSN++);
          }
        }
 else {
          startEventSN+=events.size();
        }
        LOG.info("Event sequence number is unsynchronized. Set to {}",startEventSN);
      }
 else {
        LOG.info("Event sequence number is up to date: {}",startEventSN);
      }
      isEventSNSynchronized=true;
    }
    if (response.getEvents() != null && !response.getEvents().isEmpty()) {
      List<Event> events=new ArrayList<>(response.getEvents());
      Collections.sort(events,eventSeqNumberComparator);
      for (      Event event : events) {
        manager.onGenericEvent(event.getEventClassFQN(),event.getEventData().array(),event.getSource());
      }
    }
    if (response.getEventListenersResponses() != null && !response.getEventListenersResponses().isEmpty()) {
      manager.eventListenersResponseReceived(response.getEventListenersResponses());
    }
  }
  LOG.trace("Processed event response");
}
