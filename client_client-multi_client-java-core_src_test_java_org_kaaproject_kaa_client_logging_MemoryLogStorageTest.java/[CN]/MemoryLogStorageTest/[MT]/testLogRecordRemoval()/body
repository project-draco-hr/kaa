{
  long bucketSize=3;
  MemoryLogStorage storage=new MemoryLogStorage(bucketSize,0);
  LogRecord record=new LogRecord();
  int insertionCount=7;
  int iter=insertionCount;
  while (iter-- > 0) {
    storage.addLogRecord(record);
  }
  LogBlock removingBlock=storage.getRecordBlock(7,0);
  insertionCount-=removingBlock.getRecords().size();
  storage.removeRecordBlock(removingBlock.getBlockId());
  removingBlock=storage.getRecordBlock(9,0);
  insertionCount-=removingBlock.getRecords().size();
  storage.removeRecordBlock(removingBlock.getBlockId());
  LogBlock leftBlock=storage.getRecordBlock(50,0);
  Assert.assertTrue(leftBlock.getRecords().size() == insertionCount);
}
