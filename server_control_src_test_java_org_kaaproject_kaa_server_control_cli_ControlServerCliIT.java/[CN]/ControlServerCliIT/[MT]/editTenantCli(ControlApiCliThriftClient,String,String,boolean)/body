{
  cliOut.reset();
  boolean create=strIsEmpty(tenantId);
  tenantName=tenantName + "_" + RandomStringUtils.randomNumeric(14);
  String cmdLine=(create ? "create" : "edit") + "Tenant -n " + tenantName+ (create ? "" : (" -i " + tenantId));
  if (createOut) {
    cmdLine+=" -o dummy.out";
  }
  int result=cli.processLine(cmdLine);
  Assert.assertEquals(result,0);
  String output=cliOut.toString("UTF-8");
  if (create) {
    String id=output.trim().substring("Created new tenant with id: ".length()).trim();
    return id;
  }
 else   if (tenantId.equals(FAKE_SQL_ID)) {
    Assert.assertTrue(output.trim().startsWith("Tenant with id " + FAKE_SQL_ID + " not found!"));
    return tenantId;
  }
 else {
    Assert.assertTrue(output.trim().startsWith("Tenant updated."));
    return tenantId;
  }
}
