{
  cliOut.reset();
  boolean create=strIsEmpty(userId);
  int result=-1;
  if (create) {
    String tenantId=editTenantCli(cli,null,tenantName,false);
    cliOut.reset();
    String cmdLine="createUser -uid 23894729 -t " + tenantId;
    if (createOut) {
      cmdLine+=" -o dummy.out";
    }
    result=cli.processLine(cmdLine);
  }
 else {
    result=cli.processLine("editUser -uid 3664353 -i " + userId);
  }
  Assert.assertEquals(result,0);
  String output=cliOut.toString("UTF-8");
  if (create) {
    String id=output.trim().substring("Created new user with id: ".length()).trim();
    return id;
  }
 else   if (userId.equals(FAKE_SQL_ID)) {
    Assert.assertTrue(output.trim().startsWith("User with id " + FAKE_SQL_ID + " not found!"));
    return userId;
  }
 else {
    Assert.assertTrue(output.trim().startsWith("User updated."));
    return userId;
  }
}
