{
  cliOut.reset();
  boolean create=strIsEmpty(appenderId);
  String cmdLine=(create ? "create" : "edit") + "LogAppender";
  if (!create) {
    cmdLine+=" -i " + appenderId;
  }
 else {
    cmdLine+=" -a " + applicationId;
    cmdLine+=" -s " + schemaId;
    cmdLine+=" -n " + name;
    cmdLine+=" -t " + type.name();
    if (hosts != null && !hosts.isEmpty()) {
      String flumeHosts="";
      Iterator<HostInfoDto> it=hosts.iterator();
      while (it.hasNext()) {
        HostInfoDto host=it.next();
        flumeHosts+=host.getPriority() + ":" + host.getHostname()+ ":"+ host.getPort();
        if (it.hasNext()) {
          flumeHosts+=",";
        }
      }
      cmdLine+=" -hs " + flumeHosts;
    }
  }
  if (createOut) {
    cmdLine+=" -o dummy.obj";
  }
  int result=cli.processLine(cmdLine);
  Assert.assertEquals(0,result);
  String output=cliOut.toString("UTF-8");
  Assert.assertTrue(output.trim().startsWith("Created new Log Appender with id: "));
}
