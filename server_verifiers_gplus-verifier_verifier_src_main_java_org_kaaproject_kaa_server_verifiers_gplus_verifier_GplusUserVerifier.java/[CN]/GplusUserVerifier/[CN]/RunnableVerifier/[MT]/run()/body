{
  BufferedReader bufferedReader=null;
  String line;
  StringBuilder responseJson=new StringBuilder();
  HttpURLConnection connection=null;
  try {
    connection=establishConnection(url);
    connection.setRequestMethod("GET");
    int responseCode=connection.getResponseCode();
    if (responseCode == 400) {
      callback.onTokenInvalid();
      return;
    }
    if (responseCode == 200) {
      bufferedReader=new BufferedReader(new InputStreamReader(connection.getInputStream()));
      while ((line=bufferedReader.readLine()) != null) {
        responseJson.append(line);
      }
      bufferedReader.close();
      ObjectMapper mapper=new ObjectMapper();
      Map<String,String> map=mapper.readValue(responseJson.toString(),Map.class);
      String userId=map.get("user_id");
      if (!userExternalId.equals(userId)) {
        callback.onVerificationFailure("wrong user id");
        return;
      }
 else {
        callback.onSuccess();
        return;
      }
    }
  }
 catch (  IOException e) {
    LOG.debug("message",e);
  }
 finally {
    if (null != connection) {
      connection.disconnect();
    }
    if (null != bufferedReader) {
      try {
        bufferedReader.close();
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
    }
  }
  callback.onConnectionError();
}
