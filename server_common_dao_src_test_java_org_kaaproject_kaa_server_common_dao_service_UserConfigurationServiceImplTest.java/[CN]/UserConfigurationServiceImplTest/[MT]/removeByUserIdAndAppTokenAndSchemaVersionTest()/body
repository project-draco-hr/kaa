{
  EndpointUserDto userDto=generateEndpointUser(null);
  ApplicationDto appDto=generateApplication();
  ConfigurationSchemaDto schema=generateConfSchema(appDto.getId(),1).get(0);
  generateEndpointUserConfiguration(userDto,appDto,schema);
  generateEndpointUserConfiguration(userDto,appDto,null);
  generateEndpointUserConfiguration(userDto,appDto,null);
  userConfigurationService.removeByUserIdAndAppTokenAndSchemaVersion(userDto.getId(),appDto.getApplicationToken(),schema.getMajorVersion());
  EndpointUserConfigurationDto removed=userConfigurationService.findUserConfigurationByUserIdAndAppTokenAndSchemaVersion(userDto.getId(),appDto.getApplicationToken(),schema.getMajorVersion());
  Assert.assertNull(removed);
  List<EndpointUserConfigurationDto> foundList=userConfigurationService.findUserConfigurationByUserId(userDto.getId());
  Assert.assertEquals(2,foundList.size());
}
