{
  List<BufferedImage> images=new ArrayList<BufferedImage>(tokens.size());
  int width=0;
  for (int i=0; i < tokens.size(); i++) {
    TwitterMessageToken token=tokens.get(i);
    String space;
    if (i == tokens.size() - 1) {
      space="   ";
    }
 else {
      space=" ";
    }
    token=new TwitterMessageToken(token.getToken() + space,token.getColor());
    BufferedImage image=toScaledImage(token,background);
    images.add(image);
    width+=image.getWidth();
  }
  byte[] data=toRawPPMBytes(images,width,background);
  Files.write(Paths.get(new File(filePath).toURI()),data);
  return width;
}
