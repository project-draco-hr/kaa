{
  try {
    SpecificRecordBase record=msg.getCommand().decode();
    if (record instanceof SyncRequest) {
      NettyEndpointSyncMessage nettySyncMessage=new NettyEndpointSyncMessage((SyncRequest)record,msg);
      this.epsActor.tell(nettySyncMessage.toEndpointMessage(self()),self());
    }
 else {
      LOG.warn("unknown request param: {}",record);
      msg.getChannelContext().fireExceptionCaught(new RuntimeException("unknown request param: " + record));
    }
  }
 catch (  BadRequestException|GeneralSecurityException|IOException e) {
    LOG.trace("Command decode failed " + msg);
    msg.getChannelContext().fireExceptionCaught(e);
  }
}
