{
  validateId(endpointGroupId,"Can't find vacant schemas. Invalid endpoint group id: " + endpointGroupId);
  EndpointGroup group=endpointGroupDao.findById(endpointGroupId);
  List<Configuration> configurations=configurationDao.findActualByEndpointGroupId(endpointGroupId);
  List<String> usedSchemaIds=new ArrayList<>();
  for (  Configuration configuration : configurations) {
    usedSchemaIds.add(idToString(configuration.getSchemaId()));
  }
  List<ConfigurationSchema> schemas=configurationSchemaDao.findVacantSchemas(idToString(group.getApplicationId()),usedSchemaIds);
  List<SchemaDto> schemaDtoList=new ArrayList<>();
  for (  ConfigurationSchema schema : schemas) {
    schemaDtoList.add(schema.toSchemaDto());
  }
  return schemaDtoList;
}
