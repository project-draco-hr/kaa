{
  SdkProfilesActivity.this.getView().clearError();
  BusyPopup.showPopup();
  KaaAdmin.getDataSource().getSdkProfile(id,new AsyncCallback<SdkPropertiesDto>(){
    @Override public void onFailure(    Throwable cause){
      BusyPopup.hidePopup();
      Utils.handleException(cause,SdkProfilesActivity.this.getView());
    }
    @Override public void onSuccess(    final SdkPropertiesDto profile){
      KaaAdmin.getDataSource().checkSdkProfileUsage(profile.getToken(),new AsyncCallback<Boolean>(){
        @Override public void onFailure(        Throwable cause){
          BusyPopup.hidePopup();
          Utils.handleException(cause,SdkProfilesActivity.this.getView());
        }
        @Override public void onSuccess(        Boolean used){
          BusyPopup.hidePopup();
          if (!used) {
            KaaAdmin.getDataSource().deleteSdkProfile(id,callback);
          }
 else {
            String message="Unable to delete \'%s\' (%s): SDK profile is in use.";
            Exception cause=new IllegalArgumentException(message);
            Utils.handleException(cause,SdkProfilesActivity.this.getView());
          }
        }
      }
);
    }
  }
);
}
