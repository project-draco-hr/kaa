{
  super.onCreate();
  mEventBus=new EventBus();
  mImageLoader=new ImageLoader(this);
  mProfile=new CityGuideProfile();
  KaaClientPlatformContext kaaClientContext=new AndroidKaaPlatformContext(this);
  mClient=Kaa.newClient(kaaClientContext,new SimpleKaaClientStateListener(){
    @Override public void onStarted(){
      mConfig=mClient.getConfiguration();
      mKaaStarted=true;
      mEventBus.post(new KaaStarted());
      LOG.info("Kaa client started");
    }
  }
);
  mClient.setConfigurationStorage(new SimpleConfigurationStorage(kaaClientContext,"cityGuideConfig.data"));
  mClient.addConfigurationListener(new ConfigurationListener(){
    @Override public void onConfigurationUpdate(    CityGuideConfig config){
      mConfig=config;
      mEventBus.post(new ConfigurationUpdated());
      LOG.info("Configuration updated!");
    }
  }
);
  mClient.setProfileContainer(new ProfileContainer(){
    @Override public CityGuideProfile getProfile(){
      return mProfile;
    }
  }
);
  mClient.start();
}
