{
  byte[] bytes=null;
  if (parameters != null) {
    LogAppenderParameters avroParameters=new LogAppenderParameters();
    Object params=parameters.getParameters();
    if (params instanceof FlumeAppenderParametersDto) {
      FlumeAppenderParametersDto flumeDto=(FlumeAppenderParametersDto)params;
      List<HostInfoDto> hostInfoList=flumeDto.getHosts();
      List<Object> hosts=Collections.emptyList();
      if (hostInfoList != null && !hostInfoList.isEmpty()) {
        hosts=new ArrayList<>();
        for (        HostInfoDto dto : hostInfoList) {
          hosts.add(new HostInfo(dto.getHostname(),dto.getPort(),dto.getPriority()));
        }
      }
      avroParameters.setAppenderParameters(new FlumeAppenderParameters(hosts,balancingTypeToAvro(flumeDto.getBalancingType())));
    }
 else     if (params instanceof MongoAppenderParametersDto) {
      MongoAppenderParametersDto mongoDto=(MongoAppenderParametersDto)params;
      avroParameters.setAppenderParameters(new MongoAppenderParameters(mongoDto.getCollectionName()));
    }
 else     if (params instanceof FileAppenderParametersDto) {
      FileAppenderParametersDto fileDto=(FileAppenderParametersDto)params;
      avroParameters.setAppenderParameters(new FileAppenderParameters(fileDto.getFilePath()));
    }
    AvroByteArrayConverter<LogAppenderParameters> converter=new AvroByteArrayConverter<LogAppenderParameters>(LogAppenderParameters.class);
    try {
      bytes=converter.toByteArray(avroParameters);
    }
 catch (    IOException e) {
      LOG.warn("Can't convert log appender parameters to bytes.");
    }
  }
  return bytes;
}
