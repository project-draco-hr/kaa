{
  User userEntity=userFacade.findByUserName(username);
  if (userEntity == null) {
    return ResultCode.USER_NOT_FOUND;
  }
  if (!passwordEncoder.isPasswordValid(userEntity.getPassword(),oldPassword,null)) {
    return ResultCode.OLD_PASSWORD_MISMATCH;
  }
  if (!checkPasswordStrength(newPassword)) {
    return ResultCode.BAD_PASSWORD_STRENGTH;
  }
  userEntity.setPassword(passwordEncoder.encodePassword(newPassword,null));
  userEntity.setTempPassword(false);
  userFacade.save(userEntity);
  return ResultCode.OK;
}
