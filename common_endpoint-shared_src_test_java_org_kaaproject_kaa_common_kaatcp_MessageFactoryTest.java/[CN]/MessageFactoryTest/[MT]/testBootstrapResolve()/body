{
  final byte bootstrapResolve[]=new byte[]{(byte)0xF0,0x18,0x00,0x06,'K','a','a','t','c','p',0x01,0x00,0x05,0x21,'a','p','p','l','i','c','a','t','i','o','n','1'};
  MessageFactory factory=new MessageFactory();
  BootstrapResolveListener listener=Mockito.spy(new BootstrapResolveListener(){
    @Override public void onMessage(    BootstrapResolve message){
      Assert.assertEquals("application1",message.getApplicationToken());
      Assert.assertEquals(5,message.getMessageId());
      Assert.assertEquals(false,message.isZipped());
      Assert.assertEquals(false,message.isEncrypted());
      Assert.assertEquals(true,message.isRequest());
    }
  }
);
  factory.registerMessageListener(listener);
  factory.getFramer().pushBytes(bootstrapResolve);
  Mockito.verify(listener,Mockito.times(1)).onMessage(Mockito.any(BootstrapResolve.class));
}
