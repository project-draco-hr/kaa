{
  if (mKaaStarted) {
    mSentLogCount++;
    mLastLogTime=System.currentTimeMillis();
    CellMonitorLog cellMonitorLog=new CellMonitorLog();
    cellMonitorLog.setLogTime(mLastLogTime);
    String networkOperator=mTelephonyManager.getNetworkOperator();
    if (networkOperator == null || networkOperator.isEmpty()) {
      cellMonitorLog.setNetworkOperatorCode(UNDEFINED);
    }
 else {
      cellMonitorLog.setNetworkOperatorCode(Integer.valueOf(mTelephonyManager.getNetworkOperator()));
    }
    cellMonitorLog.setNetworkOperatorName(mTelephonyManager.getNetworkOperatorName());
    int cid=UNDEFINED;
    int lac=UNDEFINED;
    if (mCellLocation != null && mCellLocation instanceof GsmCellLocation) {
      GsmCellLocation gsmCellLocation=(GsmCellLocation)mCellLocation;
      cid=gsmCellLocation.getCid();
      lac=gsmCellLocation.getLac();
    }
    cellMonitorLog.setGsmCellId(cid);
    cellMonitorLog.setGsmLac(lac);
    int gsmSignalStrength=UNDEFINED;
    if (mSignalStrength != null) {
      gsmSignalStrength=mSignalStrength.getGsmSignalStrength();
    }
    cellMonitorLog.setSignalStrength(gsmSignalStrength);
    org.kaaproject.kaa.demo.cellmonitor.Location phoneLocation=new org.kaaproject.kaa.demo.cellmonitor.Location();
    if (mGpsLocation != null) {
      phoneLocation.setLatitude(mGpsLocation.getLatitude());
      phoneLocation.setLongitude(mGpsLocation.getLongitude());
    }
    cellMonitorLog.setPhoneGpsLocation(phoneLocation);
    mClient.addLogRecord(cellMonitorLog);
    mEventBus.post(new LogSent());
  }
}
