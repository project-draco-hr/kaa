{
  this.setName(THREAD_NAME);
  while (operate) {
synchronized (sync) {
      try {
        LOG.trace("Statistics Service Recalculate Started....");
        long recalculationStart=System.currentTimeMillis();
        recalculate(recalculationPreviouseTimestamp,recalculationStart);
        recalculationPreviouseTimestamp=recalculationStart;
        long recalculateDuration=System.currentTimeMillis() - recalculationStart;
        LOG.trace("Recalculated:\nAverage Processed Requests = " + averageProcessedRequests + "\nAverage online sessions = "+ averageOnlineSessions+ "\nAverage request processing time = "+ averageDeltaSync);
        if (recalculationPeriod > recalculateDuration) {
          LOG.trace("Statistics Service Recalculate going to sleep " + (recalculationPeriod - recalculateDuration));
          sync.wait(recalculationPeriod - recalculateDuration);
        }
      }
 catch (      InterruptedException e) {
        LOG.trace("Statistics Service Interapted, shutdown service....");
        operate=false;
      }
    }
  }
  LOG.info("Statistics Service stoped.");
}
