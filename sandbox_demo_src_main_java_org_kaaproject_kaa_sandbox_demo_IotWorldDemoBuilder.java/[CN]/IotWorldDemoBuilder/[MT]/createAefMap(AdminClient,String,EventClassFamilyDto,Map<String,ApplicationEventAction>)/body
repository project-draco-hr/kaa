{
  List<EventClassDto> eventClasses=client.getEventClassesByFamilyIdVersionAndType(ecf.getId(),1,EventClassType.EVENT);
  ApplicationEventFamilyMapDto aefMap=new ApplicationEventFamilyMapDto();
  aefMap.setApplicationId(applicationId);
  aefMap.setEcfId(ecf.getId());
  aefMap.setEcfName(ecf.getName());
  aefMap.setVersion(1);
  List<ApplicationEventMapDto> eventMaps=new ArrayList<>(eventClasses.size());
  for (  EventClassDto eventClass : eventClasses) {
    ApplicationEventMapDto eventMap=new ApplicationEventMapDto();
    eventMap.setEventClassId(eventClass.getId());
    eventMap.setFqn(eventClass.getFqn());
    eventMap.setAction(actionsMap.get(eventClass.getFqn()));
    eventMaps.add(eventMap);
  }
  aefMap.setEventMaps(eventMaps);
  aefMap=client.editApplicationEventFamilyMap(aefMap);
  return aefMap.getId();
}
