{
  ByteBuffer buf=ByteBuffer.wrap(new byte[4 + 100 + 4+ 32+ 4+ 128+ 4+ 8]);
  String sdkToken="12345678900987654321abcdEFGH";
  buf.putInt(100);
  byte[] profileBody=new byte[100];
  profileBody[MAGIC_INDEX]=MAGIC_NUMBER;
  buf.put(profileBody);
  buf.put(sdkToken.getBytes(Charset.forName("UTF-8")));
  buf.put((byte)0);
  buf.put((byte)0);
  buf.put((byte)0);
  buf.put((byte)0);
  buf.put((byte)6);
  buf.put((byte)0);
  buf.put((byte)0);
  buf.put((byte)128);
  byte[] keyBody=new byte[128];
  keyBody[MAGIC_INDEX]=MAGIC_NUMBER;
  buf.put(keyBody);
  buf.put((byte)7);
  buf.put((byte)0);
  buf.put((byte)0);
  buf.put((byte)5);
  buf.put("token".getBytes(Charset.forName("UTF-8")));
  buf.put((byte)0);
  buf.put((byte)0);
  buf.put((byte)0);
  ClientSync sync=encDec.decode(concat(buildHeader(Constants.KAA_PLATFORM_PROTOCOL_BINARY_ID,1,2),getValidMetaData(),buildExtensionHeader(BinaryEncDec.PROFILE_EXTENSION_ID,0,0,0,buf.array().length),buf.array()));
  Assert.assertNotNull(sync);
  Assert.assertNotNull(sync.getClientSyncMetaData());
  Assert.assertNotNull(sync.getProfileSync());
  ProfileClientSync pSync=sync.getProfileSync();
  Assert.assertEquals(MAGIC_NUMBER,pSync.getProfileBody().array()[MAGIC_INDEX]);
  Assert.assertEquals(MAGIC_NUMBER,pSync.getEndpointPublicKey().array()[MAGIC_INDEX]);
  Assert.assertEquals(sdkToken,pSync.getSdkToken());
  Assert.assertEquals("token",pSync.getEndpointAccessToken());
}
