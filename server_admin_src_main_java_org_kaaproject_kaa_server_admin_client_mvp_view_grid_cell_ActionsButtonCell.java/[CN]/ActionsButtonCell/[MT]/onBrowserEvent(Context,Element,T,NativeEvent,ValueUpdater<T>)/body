{
  int x=event.getClientX();
  int y=event.getClientY();
  Element child=parent.getFirstChildElement();
  if (x >= child.getAbsoluteLeft() && x <= child.getAbsoluteRight() && y >= child.getAbsoluteTop() && y <= child.getAbsoluteBottom()) {
    Object key=context.getKey();
    Boolean viewData=getViewData(key);
    if (viewData != null && viewData.booleanValue()) {
      setViewData(key,false);
      setValue(context,parent,value);
    }
 else {
      String type=event.getType();
      int keyCode=event.getKeyCode();
      boolean enterPressed=KEYUP.equals(type) && keyCode == KeyCodes.KEY_ENTER;
      if (CLICK.equals(type) || enterPressed) {
        clearViewData();
        setViewData(key,true);
        setValue(context,parent,value);
        showPopup(context,parent,value,valueUpdater);
      }
    }
  }
}
