{
  KaaTcpCommand command=new KaaTcpCommand(opListMock);
  assertNotNull(command);
  SyncRequest request=new SyncRequest(key,true,true);
  command.setRequest(request);
  assertNotNull(command.getRequest());
  try {
    command.call();
    assertNotNull(command.getResponse());
    if (command.getResponse().getMessageType() != MessageType.DISCONNECT) {
      fail("Incorect response message type");
    }
    Disconnect disconnect=(Disconnect)command.getResponse();
    if (disconnect.getReason() != DisconnectReason.BAD_REQUEST) {
      fail("Bad Disconnect reason");
    }
  }
 catch (  Exception e) {
    fail(e.toString());
  }
}
