{
  EndpointCredentialsDto result=null;
  if (Validator.isValidObject(endpointCredentials)) {
    EndpointCredentials databaseRecord=this.endpointCredentialsDao.findByEndpointKeyHash(endpointCredentials.getEndpointKeyHash());
    if (databaseRecord == null || databaseRecord.getId().equals(endpointCredentials.getId())) {
      result=DaoUtil.getDto(this.endpointCredentialsDao.save(endpointCredentials));
    }
 else {
      throw new IncorrectParameterException("The endpoint credentials already exist!");
    }
  }
  return result;
}
