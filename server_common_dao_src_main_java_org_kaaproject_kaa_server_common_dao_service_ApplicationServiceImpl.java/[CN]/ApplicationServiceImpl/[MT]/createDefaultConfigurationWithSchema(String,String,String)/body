{
  ConfigurationSchemaDto schema=new ConfigurationSchemaDto();
  schema.setApplicationId(appId);
  DataSchema confSchema=new KaaSchemaFactoryImpl().createDataSchema(getStringFromFile(DEFAULT_CONFIGURATION_SCHEMA_FILE,ApplicationServiceImpl.class));
  if (!confSchema.isEmpty()) {
    schema.setSchema(confSchema.getRawSchema());
  }
 else {
    throw new RuntimeException("Can't read default configuration schema.");
  }
  schema.setName(DEFAULT_SCHEMA_NAME);
  schema.setCreatedUsername(createdUsername);
  ConfigurationSchemaDto savedSchema=configurationService.saveConfSchema(schema,groupId);
  ConfigurationDto config=configurationService.findConfigurationByAppIdAndVersion(savedSchema.getApplicationId(),savedSchema.getVersion());
  if (config == null) {
    throw new RuntimeException("Can't find default configuration by schema id " + savedSchema.getId());
  }
 else {
    return config;
  }
}
