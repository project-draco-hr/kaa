{
  try {
    CTLSchemaDto ctlSchemaDto=controlService.getCTLSchemaById(eventClassDto.getCtlSchemaId());
    EventClassViewDto eventClassViewDto=new EventClassViewDto(eventClassDto,toCtlSchemaForm(ctlSchemaDto,ConverterType.FORM_AVRO_CONVERTER));
    eventClassDto.setCreatedTime(System.currentTimeMillis());
    eventClassDto.setFqn(ctlSchemaDto.getMetaInfo().getFqn());
    eventClassDto.setTenantId(getCurrentUser().getTenantId());
    return eventClassViewDto;
  }
 catch (  ControlServiceException e) {
    throw Utils.handleException(e);
  }
}
