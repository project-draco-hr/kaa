{
  if (schema.getDependencies() != null) {
    for (    CTLSchemaMetaInfoDto dependency : schema.getDependencies()) {
      try {
        CTLSchemaDto dependencySchema=controlService.getCTLSchemaByFqnVersionAndTenantId(dependency.getFqn(),dependency.getVersion(),getCurrentUser().getTenantId());
        if (dependencySchema == null) {
          String message="Unable to locate dependency \"" + dependency.getFqn() + "\" (version "+ dependency.getVersion()+ ")";
          throw new IllegalArgumentException(message);
        }
        this.parse(dependencySchema.toCTLSchemaInfoDto());
      }
 catch (      Exception cause) {
        throw Utils.handleException(cause);
      }
    }
  }
  try {
    return parser.parse(schema.getBody());
  }
 catch (  Exception cause) {
    throw new IllegalArgumentException("Unable to parse CTL schema: " + cause.getMessage());
  }
}
