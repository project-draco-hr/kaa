{
  if (logException) {
    logger.error("Unexpected exception catched!",exceptionWithCause);
  }
  String cause="";
  if (exceptionWithCause.getCause() != null) {
    cause=exceptionWithCause.getCause().getClass().getCanonicalName();
  }
  if (exceptionWithCause instanceof KaaAdminServiceException) {
    return (KaaAdminServiceException)exceptionWithCause;
  }
 else   if (exceptionWithCause instanceof NotFoundException) {
    return new KaaAdminServiceException(exceptionWithCause.getMessage(),ServiceErrorCode.ITEM_NOT_FOUND);
  }
 else   if (exceptionWithCause instanceof IllegalArgumentException || exceptionWithCause instanceof IncorrectParameterException || cause.contains("IncorrectParameterException")) {
    return new KaaAdminServiceException(exceptionWithCause.getMessage(),ServiceErrorCode.BAD_REQUEST_PARAMS);
  }
 else   if (StringUtils.isNotBlank(cause) && cause.equals(expectedCauseClass.getCanonicalName())) {
    return new KaaAdminServiceException(errorMessage,ServiceErrorCode.GENERAL_ERROR);
  }
 else {
    return new KaaAdminServiceException(exceptionWithCause.getMessage(),ServiceErrorCode.GENERAL_ERROR);
  }
}
