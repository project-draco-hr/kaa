{
  clearDBData();
  if (tenant == null) {
    tenant=userService.findTenantByName(SUPER_TENANT);
    if (tenant == null) {
      TenantDto tn=new TenantDto();
      tn.setName(SUPER_TENANT);
      tenant=userService.saveTenant(tn);
      appDto=generateApplicationDto(tenant.getId());
    }
  }
  Set<CTLSchemaDto> dependency=new HashSet<>();
  firstSchema=ctlService.saveCTLSchema(generateCTLSchemaDto(DEFAULT_FQN,tenant.getId(),1,null));
  dependency.add(firstSchema);
  secondSchema=ctlService.saveCTLSchema(generateCTLSchemaDto(DEFAULT_FQN,tenant.getId(),2,null));
  dependency.add(secondSchema);
  thirdSchema=ctlService.saveCTLSchema(generateCTLSchemaDto(DEFAULT_FQN,tenant.getId(),3,null));
  dependency.add(thirdSchema);
  fourthSchema=ctlService.saveCTLSchema(generateCTLSchemaDto(DEFAULT_FQN,tenant.getId(),4,null));
  dependency.add(fourthSchema);
  mainSchema=generateCTLSchemaDto(DEFAULT_FQN,tenant.getId(),7,null);
  mainSchema.setDependencySet(dependency);
  mainSchema=ctlService.saveCTLSchema(mainSchema);
  systemSchema=ctlService.saveCTLSchema(generateCTLSchemaDto(DEFAULT_FQN,null,50,null));
  tenantSchema=ctlService.saveCTLSchema(generateCTLSchemaDto(DEFAULT_FQN,tenant.getId(),77,null));
  CTLSchemaDto unsaved=generateCTLSchemaDto(DEFAULT_FQN,tenant.getId(),80,CTLSchemaScopeDto.APPLICATION);
  unsaved.setApplicationId(appDto.getId());
  appSchema=ctlService.saveCTLSchema(unsaved);
  beta=new CTLSchemaDto();
  CTLSchemaMetaInfoDto betaMetaInfo=new CTLSchemaMetaInfoDto("org.kaaproject.kaa.Beta",1);
  betaMetaInfo.setScope(CTLSchemaScopeDto.TENANT);
  beta.setMetaInfo(betaMetaInfo);
  beta.setBody(getResourceAsString(TEST_CTL_SCHEMA_BETA));
  beta=ctlService.saveCTLSchema(beta);
  alpha=new CTLSchemaDto();
  CTLSchemaMetaInfoDto alphaMetaInfo=new CTLSchemaMetaInfoDto("org.kaaproject.kaa.Alpha",1);
  alphaMetaInfo.setScope(CTLSchemaScopeDto.TENANT);
  Set<CTLSchemaDto> alphaDependencies=new HashSet<>();
  alphaDependencies.add(beta);
  alpha.setMetaInfo(alphaMetaInfo);
  alpha.setDependencySet(alphaDependencies);
  alpha.setBody(getResourceAsString(TEST_CTL_SCHEMA_ALPHA));
  alpha=ctlService.saveCTLSchema(alpha);
  allSchemaList=Arrays.asList(firstSchema,secondSchema,thirdSchema,fourthSchema,mainSchema,systemSchema,tenantSchema,appSchema,beta,alpha);
}
