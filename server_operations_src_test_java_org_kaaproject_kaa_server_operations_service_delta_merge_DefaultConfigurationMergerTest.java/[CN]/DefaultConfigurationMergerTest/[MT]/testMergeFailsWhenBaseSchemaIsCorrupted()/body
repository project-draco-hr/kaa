{
  Path schemaUrl=Paths.get(Thread.currentThread().getContextClassLoader().getResource("service/delta/merge/corruptedSchema.json").toURI());
  String configuraionSchema=new String(Files.readAllBytes(schemaUrl));
  ConfigurationSchemaDto configurationSchema=new ConfigurationSchemaDto();
  configurationSchema.setId("configuration_schema_0");
  configurationSchema.setSchema(configuraionSchema);
  configurationSchema.setBaseSchema(configuraionSchema);
  configurationSchema.setOverrideSchema(configuraionSchema);
  EndpointGroupDto endpointGroupWeight0=new EndpointGroupDto();
  endpointGroupWeight0.setId("group_id_0");
  endpointGroupWeight0.setWeight(0);
  Path configuraionWeight0Path=Paths.get(Thread.currentThread().getContextClassLoader().getResource("service/delta/merge/config_weight_0.json").toURI());
  ConfigurationDto configurationWeight0=new ConfigurationDto();
  configurationWeight0.setEndpointGroupId(endpointGroupWeight0.getId());
  configurationWeight0.setSchemaId(configurationSchema.getId());
  configurationWeight0.setBinaryBody(Files.readAllBytes(configuraionWeight0Path));
  EndpointGroupDto endpointGroupWeight1=new EndpointGroupDto();
  endpointGroupWeight1.setId("group_id_1");
  endpointGroupWeight1.setWeight(1);
  Path configuraionWeight1Path=Paths.get(Thread.currentThread().getContextClassLoader().getResource("service/delta/merge/config_weight_1.json").toURI());
  ConfigurationDto configurationWeight1=new ConfigurationDto();
  configurationWeight1.setEndpointGroupId(endpointGroupWeight1.getId());
  configurationWeight1.setSchemaId(configurationSchema.getId());
  configurationWeight1.setBinaryBody(Files.readAllBytes(configuraionWeight1Path));
  List<EndpointGroupDto> endpointGroups=new ArrayList<>();
  endpointGroups.add(endpointGroupWeight0);
  endpointGroups.add(endpointGroupWeight1);
  List<ConfigurationDto> configurations=new ArrayList<>();
  configurations.add(configurationWeight0);
  configurations.add(configurationWeight1);
  ConfigurationMerger merger=new DefaultConfigurationMerger();
  merger.merge(endpointGroups,configurations,configurationSchema);
}
