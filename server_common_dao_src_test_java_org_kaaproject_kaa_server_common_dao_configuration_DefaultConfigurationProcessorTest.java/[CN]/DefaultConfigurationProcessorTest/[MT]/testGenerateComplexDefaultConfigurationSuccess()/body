{
  Path schemaPath=Paths.get(Thread.currentThread().getContextClassLoader().getResource("dao/configuration/complexSchema.json").toURI());
  String configuraionSchema=new String(Files.readAllBytes(schemaPath));
  ConfigurationProcessor configurationProcessor=new DefaultConfigurationProcessorStub(configuraionSchema);
  String generatedConfiguration=configurationProcessor.getRootJsonConfiguration();
  Path expectedGeneratedConfigurationPath=Paths.get(Thread.currentThread().getContextClassLoader().getResource("dao/configuration/expectedDefaultConfigurationForComplexSchema.json").toURI());
  String expectedGeneratedConfiguration=new String(Files.readAllBytes(expectedGeneratedConfigurationPath));
  GenericAvroConverter<GenericRecord> converter=new GenericAvroConverter<>(configuraionSchema);
  GenericRecord generatedConfigurationGenericRecord=converter.decodeJson(generatedConfiguration);
  GenericRecord expectedGeneratedConfigurationGenericRecord=converter.decodeJson(expectedGeneratedConfiguration);
  Assert.assertTrue(generatedConfigurationGenericRecord.equals(expectedGeneratedConfigurationGenericRecord));
}
