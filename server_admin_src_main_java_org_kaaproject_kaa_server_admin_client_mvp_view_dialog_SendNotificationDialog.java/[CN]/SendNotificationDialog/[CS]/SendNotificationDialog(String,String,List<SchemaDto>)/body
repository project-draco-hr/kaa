{
  super(false,true);
  this.applicationId=applicationId;
  this.topicId=topicId;
  setWidth("500px");
  setTitle(Utils.constants.send_notification());
  VerticalPanel dialogContents=new VerticalPanel();
  dialogContents.setSpacing(4);
  setWidget(dialogContents);
  errorPanel=new AlertPanel(AlertPanel.Type.ERROR);
  errorPanel.setVisible(false);
  dialogContents.add(errorPanel);
  FlexTable table=new FlexTable();
  table.setCellSpacing(6);
  int row=0;
  Widget label=new Label(Utils.constants.notificationSchema());
  label.addStyleName(REQUIRED);
  notificationSchema=new SchemaListBox();
  notificationSchema.setWidth("80px");
  notificationSchema.setAcceptableValues(notificationSchemas);
  notificationSchema.addValueChangeHandler(this);
  table.setWidget(row,0,label);
  table.setWidget(row,1,notificationSchema);
  table.getCellFormatter().setHorizontalAlignment(row,0,HasHorizontalAlignment.ALIGN_RIGHT);
  row++;
  label=new Label(Utils.constants.expiresAt());
  expiredAt=new DateBox();
  expiredAt.setWidth("200px");
  table.setWidget(row,0,label);
  table.setWidget(row,1,expiredAt);
  table.getCellFormatter().setHorizontalAlignment(row,0,HasHorizontalAlignment.ALIGN_RIGHT);
  row++;
  label=new Label(Utils.constants.selectNotificationFile());
  label.addStyleName(REQUIRED);
  notificationFileUpload=new FileUploadForm();
  notificationFileUpload.setWidth("200px");
  table.setWidget(row,0,label);
  table.setWidget(row,1,notificationFileUpload);
  table.getCellFormatter().setHorizontalAlignment(row,0,HasHorizontalAlignment.ALIGN_RIGHT);
  dialogContents.add(table);
  notificationFileUpload.addChangeHandler(this);
  fileItemName=notificationFileUpload.getFileItemName();
  notificationFileUpload.addSubmitCompleteHandler(new SubmitCompleteHandler(){
    @Override public void onSubmitComplete(    SubmitCompleteEvent event){
      performSend();
    }
  }
);
  sendButton=new Button(Utils.constants.send(),new ClickHandler(){
    @Override public void onClick(    ClickEvent event){
      notificationFileUpload.submit();
    }
  }
);
  Button closeButton=new Button(Utils.constants.close(),new ClickHandler(){
    @Override public void onClick(    ClickEvent event){
      hide();
    }
  }
);
  addButton(sendButton);
  addButton(closeButton);
  sendButton.setEnabled(false);
}
