{
  try {
    CreateUserResult result=userFacade.saveUserDto(user,passwordEncoder);
    user.setExternalUid(result.getUserId().toString());
    UserDto userDto=userService.editUser(user);
    if (StringUtils.isNotBlank(result.getPassword())) {
      userDto.setTempPassword(result.getPassword());
    }
    return userDto;
  }
 catch (  Exception e) {
    throw Utils.handleException(e);
  }
}
