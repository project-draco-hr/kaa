{
  Header signatureHeader=response.getFirstHeader(CommonEPConstans.SIGNATURE_HEADER_NAME);
  HttpEntity resEntity=response.getEntity();
  if (resEntity != null && signatureHeader != null) {
    byte[] body=toByteArray(resEntity);
    byte[] signature;
    if (signatureHeader.getValue() != null) {
      signature=Base64.decodeBase64(signatureHeader.getValue().getBytes(Charsets.UTF_8));
    }
 else {
      signature=new byte[0];
    }
    consume(resEntity);
    return verifyResponse(body,signature);
  }
 else {
    throw new IOException("can't read message");
  }
}
