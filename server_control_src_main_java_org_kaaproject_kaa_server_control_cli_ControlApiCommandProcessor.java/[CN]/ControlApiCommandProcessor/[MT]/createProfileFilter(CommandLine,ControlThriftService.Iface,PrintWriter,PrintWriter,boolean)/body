{
  try {
    ProfileFilterDto profileFilter=null;
    if (edit) {
      String profileFilterId=line.getOptionValue("i");
      profileFilter=toDto(client.getProfileFilter(profileFilterId));
      if (profileFilter == null) {
        writer.println("Profile Filter with id " + profileFilterId + " not found!");
        return;
      }
    }
 else {
      profileFilter=new ProfileFilterDto();
    }
    if (line.hasOption("f")) {
      String filterFile=line.getOptionValue("f");
      String filter=readFile(filterFile,errorWriter);
      if (filter != null) {
        profileFilter.setBody(filter);
      }
 else {
        return;
      }
    }
    if (line.hasOption("s")) {
      profileFilter.setSchemaId(line.getOptionValue("s"));
    }
    if (line.hasOption("e")) {
      profileFilter.setEndpointGroupId(line.getOptionValue("e"));
    }
    ProfileFilterDto savedProfileFilter=toDto(client.editProfileFilter(toDataStruct(profileFilter)));
    if (edit) {
      writer.println("Profile Filter updated.");
    }
 else {
      writer.println("Created new Profile Filter with id: " + savedProfileFilter.getId());
      if (line.hasOption("o")) {
        String outFileName=line.getOptionValue("o");
        storeInfo(outFileName,savedProfileFilter.getId(),errorWriter);
      }
    }
  }
 catch (  TException e) {
    handleException("Unable to " + (edit ? "update" : "create") + " Profile Filter",e,errorWriter);
  }
}
