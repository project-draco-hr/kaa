{
  try {
    ApplicationDto application=null;
    if (edit) {
      String applicationId=line.getOptionValue("i");
      application=toDto(client.getApplication(applicationId));
      if (application == null) {
        writer.println("Application with id " + applicationId + " not found!");
        return;
      }
    }
 else {
      application=new ApplicationDto();
    }
    if (line.hasOption("n")) {
      application.setName(line.getOptionValue("n"));
    }
    if (line.hasOption("t")) {
      application.setTenantId(line.getOptionValue("t"));
    }
    ApplicationDto savedApplication=toDto(client.editApplication(toDataStruct(application)));
    if (edit) {
      writer.println("Application updated.");
    }
 else {
      writer.println("Created new application with id: " + savedApplication.getId());
      if (line.hasOption("o")) {
        String outFileName=line.getOptionValue("o");
        storeInfo(outFileName,savedApplication.getId(),errorWriter);
      }
    }
  }
 catch (  TException e) {
    handleException("Unable to " + (edit ? "update" : "create") + " application",e,errorWriter);
  }
}
