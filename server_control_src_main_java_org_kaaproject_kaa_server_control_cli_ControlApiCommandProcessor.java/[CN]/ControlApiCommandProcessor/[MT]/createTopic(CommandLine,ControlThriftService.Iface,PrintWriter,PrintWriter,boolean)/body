{
  try {
    TopicDto topicDto;
    if (edit) {
      String topicId=line.getOptionValue("i");
      topicDto=toDto(client.getTopic(topicId));
      if (topicDto == null) {
        writer.println("Topic with id " + topicId + NOT_FOUND);
        return;
      }
    }
 else {
      topicDto=new TopicDto();
    }
    if (line.hasOption("a")) {
      String applicationId=line.getOptionValue("a");
      if (StringUtils.isNotBlank(applicationId)) {
        topicDto.setApplicationId(applicationId);
      }
 else {
        errorWriter.println("Invalid application id for topic.");
        return;
      }
    }
    if (line.hasOption("n")) {
      topicDto.setName(line.getOptionValue("n"));
    }
    if (line.hasOption("t")) {
      String type=line.getOptionValue("t");
      topicDto.setType(TopicTypeDto.valueOf(type.toUpperCase()));
    }
    TopicDto savedTopic=toDto(client.editTopic(toDataStruct(topicDto)));
    if (edit) {
      writer.println("Topic updated.");
    }
 else {
      writer.println("Created new Topic with id: " + savedTopic.getId());
      if (line.hasOption("o")) {
        String outFileName=line.getOptionValue("o");
        storeInfo(outFileName,savedTopic.getId(),errorWriter);
      }
    }
  }
 catch (  TException e) {
    handleException(UNABLE_TO + (edit ? UPDATE : CREATE) + TOPIC,e,errorWriter);
  }
}
