{
  String serviceName=this.applicationService.findAppById(applicationId).getCredentialsServiceName();
  if (StringUtils.isBlank(serviceName)) {
    serviceName=StringUtils.uncapitalize(TrustfulCredentialsService.class.getSimpleName());
    LOG.debug("No credentials service configured for application [{}], using [{}]",applicationId,serviceName);
  }
  return new CredentialsServiceAdapter(applicationId,this.applicationContext.getBean(serviceName,org.kaaproject.kaa.server.common.dao.CredentialsService.class));
}
