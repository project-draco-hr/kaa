{
  SdkPropertiesDto saved=null;
  if (Validator.isValidSqlObject(sdkPropertiesDto)) {
    if (StringUtils.isNotBlank(sdkPropertiesDto.getId())) {
      SdkKey entity=new SdkKey(sdkPropertiesDto);
      SdkKey loaded=sdkKeyDao.findSdkKeyByToken(entity.getToken());
      LOG.debug("Saving SDK profile [{}] for application [{}]",entity.getToken(),sdkPropertiesDto.getApplicationId());
      if (loaded == null || loaded.getStringId().equals(entity.getStringId())) {
        saved=DaoUtil.getDto(sdkKeyDao.save(entity));
      }
 else {
        throw new IncorrectParameterException("An SDK profile with token [" + entity.getToken() + "] already exists.");
      }
    }
 else {
      SdkKey entity=new SdkKey(sdkPropertiesDto);
      SdkKey loaded=sdkKeyDao.findSdkKeyByToken(entity.getToken());
      if (loaded == null) {
        saved=DaoUtil.getDto(sdkKeyDao.save(entity));
      }
 else {
        saved=DaoUtil.getDto(loaded);
      }
    }
  }
  return saved;
}
