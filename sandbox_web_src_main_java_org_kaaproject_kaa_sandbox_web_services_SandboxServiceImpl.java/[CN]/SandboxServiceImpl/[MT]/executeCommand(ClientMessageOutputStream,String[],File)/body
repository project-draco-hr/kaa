{
  try {
    Execute exec=new Execute(new PumpStreamHandler(outStream));
    exec.setEnvironment(sandboxEnv);
    if (workingDir != null) {
      exec.setWorkingDirectory(workingDir);
    }
    exec.setCommandline(command);
    exec.execute();
    if (exec.isFailure()) {
      throw new SandboxServiceException("Process returned bad exit value: " + exec.getExitValue());
    }
  }
 catch (  Exception e) {
    throw Utils.handleException(e);
  }
}
