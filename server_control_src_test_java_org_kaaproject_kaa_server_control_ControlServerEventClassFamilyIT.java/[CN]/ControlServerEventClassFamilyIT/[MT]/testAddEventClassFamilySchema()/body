{
  EventClassFamilyDto eventClassFamily=createEventClassFamily();
  String schema=getResourceAsString(TEST_EVENT_CLASS_FAMILY_SCHEMA);
  client.addEventClassFamilySchema(eventClassFamily.getId(),schema,null);
  EventClassFamilyDto storedEventClassFamily=toDto(client.getEventClassFamily(eventClassFamily.getId()));
  List<EventSchemaVersionDto> schemas=storedEventClassFamily.getSchemas();
  Assert.assertNotNull(schemas);
  Assert.assertEquals(1,schemas.size());
  EventSchemaVersionDto eventSchema=schemas.get(0);
  Assert.assertNotNull(eventSchema);
  Assert.assertEquals(1,eventSchema.getVersion());
  Assert.assertEquals(schema,eventSchema.getSchema());
  client.addEventClassFamilySchema(eventClassFamily.getId(),schema,null);
  storedEventClassFamily=toDto(client.getEventClassFamily(eventClassFamily.getId()));
  schemas=storedEventClassFamily.getSchemas();
  Assert.assertNotNull(schemas);
  Assert.assertEquals(2,schemas.size());
  eventSchema=schemas.get(1);
  Assert.assertNotNull(eventSchema);
  Assert.assertEquals(2,eventSchema.getVersion());
  Assert.assertEquals(schema,eventSchema.getSchema());
}
