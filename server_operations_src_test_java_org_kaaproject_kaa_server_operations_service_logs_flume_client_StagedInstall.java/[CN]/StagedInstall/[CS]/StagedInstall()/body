{
  String tarballPath=System.getProperty(PROP_PATH_TO_DIST_TARBALL);
  if (tarballPath == null || tarballPath.trim().length() == 0) {
    LOGGER.info("No value specified for system property: " + PROP_PATH_TO_DIST_TARBALL + ". Will attempt to use relative path to locate dist tarball.");
    tarballPath=getRelativeTarballPath();
  }
  if (tarballPath == null || tarballPath.trim().length() == 0) {
    throw new Exception("Failed to locate tar-ball distribution. " + "Please specify explicitly via system property: " + PROP_PATH_TO_DIST_TARBALL);
  }
  File tarballFile=new File(tarballPath);
  if (!tarballFile.isFile() || !tarballFile.canRead()) {
    throw new Exception("The tarball distribution file is invalid: " + tarballPath + ". You can override this by explicitly setting the "+ "system property: "+ PROP_PATH_TO_DIST_TARBALL);
  }
  LOGGER.info("Dist tarball to use: " + tarballPath);
  stageDir=getStagingDirectory();
  File tarFile=gunzipDistTarball(tarballFile,stageDir);
  untarTarFile(tarFile,stageDir);
  tarFile.delete();
  LOGGER.info("Dist tarball staged to: " + stageDir);
  File rootDir=stageDir;
  File[] listBaseDirs=stageDir.listFiles();
  if (listBaseDirs != null && listBaseDirs.length == 1 && listBaseDirs[0].isDirectory()) {
    rootDir=listBaseDirs[0];
  }
  baseDir=rootDir;
  File launchScript=new File(baseDir,"bin/flume-ng");
  giveExecutePermissions(launchScript);
  launchScriptPath=launchScript.getCanonicalPath();
  File confDir=new File(baseDir,"conf");
  confDirPath=confDir.getCanonicalPath();
  File logDir=new File(baseDir,"logs");
  logDir.mkdirs();
  logDirPath=logDir.getCanonicalPath();
  LOGGER.info("Staged install root directory: " + rootDir.getCanonicalPath());
}
