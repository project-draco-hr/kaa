{
  long startTime=System.currentTimeMillis();
  Socket socket;
  boolean connected=false;
  while (System.currentTimeMillis() - startTime < timeout) {
    try {
      socket=new Socket(host,port);
      socket.close();
      connected=true;
      break;
    }
 catch (    IOException e) {
      Thread.sleep(2000);
    }
  }
  if (!connected) {
    throw new IOException("Port not opened within specified timeout.");
  }
}
