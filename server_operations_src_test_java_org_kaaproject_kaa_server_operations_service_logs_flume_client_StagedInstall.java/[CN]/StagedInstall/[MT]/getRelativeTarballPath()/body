{
  String tarballPath=null;
  File dir=new File("..");
  while (dir != null && dir.isDirectory()) {
    File testFile=new File(dir,"flume-ng-dist/target");
    if (testFile.exists() && testFile.isDirectory()) {
      LOGGER.info("Found candidate dir: " + testFile.getCanonicalPath());
      File[] candidateFiles=testFile.listFiles(new FileFilter(){
        @Override public boolean accept(        File pathname){
          String name=pathname.getName();
          if (name != null && name.startsWith("apache-flume-") && name.endsWith("-bin.tar.gz")) {
            return true;
          }
          return false;
        }
      }
);
      if (candidateFiles != null && candidateFiles.length > 0) {
        if (candidateFiles.length == 1) {
          File file=candidateFiles[0];
          if (file.isFile() && file.canRead()) {
            tarballPath=file.getCanonicalPath();
            LOGGER.info("Found file: " + tarballPath);
            break;
          }
 else {
            LOGGER.warn("Invalid file: " + file.getCanonicalPath());
          }
        }
 else {
          StringBuilder sb=new StringBuilder("Multiple candate tarballs");
          sb.append(" found in directory ");
          sb.append(testFile.getCanonicalPath()).append(": ");
          boolean first=true;
          for (          File file : candidateFiles) {
            if (first) {
              first=false;
              sb.append(" ");
            }
 else {
              sb.append(", ");
            }
            sb.append(file.getCanonicalPath());
          }
          sb.append(". All these files will be ignored.");
          LOGGER.warn(sb.toString());
        }
      }
    }
    dir=dir.getParentFile();
  }
  return tarballPath;
}
