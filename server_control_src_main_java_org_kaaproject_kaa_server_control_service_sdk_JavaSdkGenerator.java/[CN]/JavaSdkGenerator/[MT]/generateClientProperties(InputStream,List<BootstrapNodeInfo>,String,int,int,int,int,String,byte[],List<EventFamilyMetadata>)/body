{
  Properties clientProperties=new Properties();
  clientProperties.load(clientPropertiesStream);
  String bootstrapServers="";
  LOG.debug("[sdk generateClientProperties] bootstrapNodes.size(): {}",bootstrapNodes.size());
  for (int nodeIndex=0; nodeIndex < bootstrapNodes.size(); ++nodeIndex) {
    if (nodeIndex > 0) {
      bootstrapServers+=";";
    }
    BootstrapNodeInfo node=bootstrapNodes.get(nodeIndex);
    List<BootstrapSupportedChannel> supportedChannels=node.getSupportedChannelsArray();
    for (int chIndex=0; chIndex < supportedChannels.size(); ++chIndex) {
      ZkSupportedChannel channel=supportedChannels.get(chIndex).getZkChannel();
      bootstrapServers+=channel.getChannelType().ordinal();
      bootstrapServers+=":";
      if (channel.getChannelType() == ZkChannelType.HTTP) {
        ZkHttpComunicationParameters params=(ZkHttpComunicationParameters)channel.getCommunicationParameters();
        bootstrapServers+=params.getZkComunicationParameters().getHostName();
        bootstrapServers+=":";
        bootstrapServers+=params.getZkComunicationParameters().getPort();
      }
 else       if (channel.getChannelType() == ZkChannelType.HTTP_LP) {
        ZkHttpLpComunicationParameters params=(ZkHttpLpComunicationParameters)channel.getCommunicationParameters();
        bootstrapServers+=params.getZkComunicationParameters().getHostName();
        bootstrapServers+=":";
        bootstrapServers+=params.getZkComunicationParameters().getPort();
      }
 else       if (channel.getChannelType() == ZkChannelType.KAATCP) {
        ZkKaaTcpComunicationParameters params=(ZkKaaTcpComunicationParameters)channel.getCommunicationParameters();
        bootstrapServers+=params.getZkComunicationParameters().getHostName();
        bootstrapServers+=":";
        bootstrapServers+=params.getZkComunicationParameters().getPort();
      }
      bootstrapServers+="|";
    }
    bootstrapServers+=Base64.encodeBase64String(node.getConnectionInfo().getPublicKey().array());
  }
  String ecfs="";
  if (eventFamilies != null) {
    for (int i=0; i < eventFamilies.size(); i++) {
      if (i > 0) {
        ecfs+=";";
      }
      ecfs+=eventFamilies.get(i).getEcfName() + ":" + eventFamilies.get(i).getVersion();
    }
  }
  clientProperties.put(BOOTSTRAP_SERVERS_PROPERTY,bootstrapServers);
  clientProperties.put(APP_TOKEN_PROPERTY,appToken);
  clientProperties.put(CONFIG_VERSION_PROPERTY,"" + configurationSchemaVersion);
  clientProperties.put(PROFILE_VERSION_PROPERTY,"" + profileSchemaVersion);
  clientProperties.put(NOTIFICATION_VERSION_PROPERTY,"" + notificationSchemaVersion);
  clientProperties.put(LOGS_VERSION_PROPERTY,"" + logSchemaVersion);
  clientProperties.put(CONFIG_SCHEMA_DEFAULT_PROPERTY,configurationProtocolSchemaBody);
  clientProperties.put(CONFIG_DATA_DEFAULT_PROPERTY,Base64.encodeBase64String(defaultConfigurationData));
  clientProperties.put(EVENT_CLASS_FAMILY_VERSION_PROPERTY,ecfs);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  clientProperties.store(baos,"");
  return baos.toByteArray();
}
