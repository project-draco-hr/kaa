{
  String appId=generateApplicationDto(null).getId();
  List<ProfileFilterDto> filters=profileService.findProfileFilterByAppIdAndVersion(appId,1);
  Assert.assertNotNull(filters);
  ProfileFilterDto filter=filters.get(0);
  filter.setId(null);
  EndpointGroupDto group=generateEndpointGroupDto(appId);
  filter.setEndpointGroupId(group.getId());
  ProfileFilterDto dto=profileService.saveProfileFilter(filter);
  ChangeProfileFilterNotification change=profileService.activateProfileFilter(dto.getId(),null);
  Assert.assertNotNull(change);
  Assert.assertEquals(UpdateStatus.ACTIVE,change.getProfileFilterDto().getStatus());
  change=profileService.deactivateProfileFilter(dto.getId(),null);
  Assert.assertNotNull(change);
  Assert.assertEquals(UpdateStatus.DEPRECATED,change.getProfileFilterDto().getStatus());
}
