{
  ChannelHandlerContext channelContextMock=Mockito.mock(ChannelHandlerContext.class);
  SyncRequest request=new SyncRequest();
  request.setRequestId(REQUEST_ID);
  SyncRequestMetaData md=new SyncRequestMetaData();
  md.setApplicationToken(APP_TOKEN);
  md.setEndpointPublicKeyHash(clientPublicKeyHash);
  request.setSyncRequestMetaData(md);
  ProfileSyncRequest profileSync=new ProfileSyncRequest();
  profileSync.setEndpointPublicKey(clientPublicKey);
  profileSync.setProfileBody(ByteBuffer.wrap(PROFILE_BODY.getBytes()));
  profileSync.setVersionInfo(new EndpointVersionInfo(1,2,3,4,null,5));
  request.setProfileSyncRequest(profileSync);
  Mockito.when(operationsService.sync(request,null)).thenReturn(simpleResponse);
  ResponseBuilder responseBuilder=Mockito.mock(ResponseBuilder.class);
  ErrorBuilder errorBuilder=Mockito.mock(ErrorBuilder.class);
  SessionInitRequest message=toSignedRequest(UUID.randomUUID(),ChannelType.HTTP,channelContextMock,request,responseBuilder,errorBuilder);
  Assert.assertNotNull(akkaService.getActorSystem());
  akkaService.process(message);
  Mockito.verify(operationsService,Mockito.timeout(TIMEOUT * 10).atLeastOnce()).sync(request,null);
  Mockito.verify(responseBuilder,Mockito.timeout(TIMEOUT).atLeastOnce()).build(Mockito.any(byte[].class),Mockito.any(boolean.class));
}
