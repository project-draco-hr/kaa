{
  long retryPeriod=2 * 1000;
  KaaChannelManager channelManager=Mockito.mock(KaaChannelManager.class);
  DefaultLogUploadFailoverStrategy strategy=new DefaultLogUploadFailoverStrategy(channelManager);
  strategy.setRetryPeriod(retryPeriod);
  strategy.onFailure(LogDeliveryErrorCode.APPENDER_INTERNAL_ERROR);
  Assert.assertFalse(strategy.isUploadApproved());
  try {
    Thread.sleep(retryPeriod / 2);
    Assert.assertFalse(strategy.isUploadApproved());
    Thread.sleep(retryPeriod / 2);
    Assert.assertTrue(strategy.isUploadApproved());
  }
 catch (  Exception e) {
    Assert.assertTrue(false);
  }
}
