{
  String action=intent.getAction();
  if (BluetoothNativeHelper.ACTION_UUID.equals(action)) {
    BluetoothDevice device=intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
    if (pendingDiscoveryDeviceName != null && pendingDiscoveryDeviceName.equals(device.getName())) {
      context.unregisterReceiver(this);
      pendingDiscoveryDeviceName=null;
      ParcelUuid[] uuids=BluetoothNativeHelper.getUuids(device);
      if (uuids != null && uuids.length > 0) {
        UUID uuid=uuids[0].getUuid();
        try {
          connect(device,uuid);
        }
 catch (        IOException e) {
          Log.e(TAG,"Failed to connect to device " + device.getName(),e);
          getCallback().onError(e);
        }
      }
 else {
        Log.e(TAG,"Failed to connect to device " + device.getName() + " uuids are empty");
        getCallback().onError(new BTException("Failed to connect to device " + device.getName() + " "+ "uuids are empty"));
      }
    }
  }
}
