{
  try {
    CTLSchemaDto ctlSchemaDto=null;
    if (eventClassDto.getVersion() == 0) {
      ctlSchemaDto=controlService.getCTLSchemaById(eventClassDto.getCtlSchemaId());
    }
 else {
      ctlSchemaDto=controlService.getCTLSchemaByMetaInfoIdAndVer(eventClassDto.getCtlSchemaId(),eventClassDto.getVersion());
    }
    eventClassDto.setCtlSchemaId(ctlSchemaDto.getId());
    EventClassViewDto eventClassViewDto=new EventClassViewDto(eventClassDto,toCtlSchemaForm(ctlSchemaDto,ConverterType.FORM_AVRO_CONVERTER));
    return eventClassViewDto;
  }
 catch (  ControlServiceException e) {
    throw Utils.handleException(e);
  }
}
