{
  try {
    super.doExecute(url,method,requestCallback,responseExtractor);
  }
 catch (  ResourceAccessException ex) {
    if (username != null && password != null) {
      HttpComponentsRequestFactoryBasicAuth requestFactory=(HttpComponentsRequestFactoryBasicAuth)getRequestFactory();
      requestFactory.setCredentials(username,password);
    }
    index++;
    if (index >= hosts.length) {
      index=0;
    }
    newUrl="http://" + hosts[index] + ":"+ ports[index];
    setNewRequestFactory(new HttpHost(hosts[index],ports[index],"http"));
    String urlWitthNewHostAndPort=url.toString();
    urlWitthNewHostAndPort=urlWitthNewHostAndPort.replaceFirst(url.getHost(),hosts[index]);
    urlWitthNewHostAndPort=urlWitthNewHostAndPort.replaceFirst(String.valueOf(url.getPort()),String.valueOf(ports[index]));
    URI FullUrl=URI.create(urlWitthNewHostAndPort);
    super.doExecute(FullUrl,method,requestCallback,responseExtractor);
  }
  return null;
}
