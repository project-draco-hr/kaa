{
  String checkSum="";
  try (FileInputStream fileInput=new FileInputStream(targetFile)){
    MessageDigest messageDigest=MessageDigest.getInstance(MD5);
    byte[] dataBytes=new byte[1024 * 100];
    int bytesRead=0;
    while ((bytesRead=fileInput.read(dataBytes)) != -1) {
      messageDigest.update(dataBytes,0,bytesRead);
    }
    byte[] digestBytes=messageDigest.digest();
    checkSum=DatatypeConverter.printHexBinary(digestBytes);
    LOG.debug("Calculated checksum for filer[{}]: [{}], downloaded is [{}]",targetFile.getAbsolutePath(),checkSum,downloadedCheckSum);
  }
 catch (  IOException|NoSuchAlgorithmException e) {
    LOG.debug("Can't calculate checksum for file [{}]",targetFile.getAbsolutePath());
  }
  return checkSum.equalsIgnoreCase(downloadedCheckSum);
}
