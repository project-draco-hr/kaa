{
  ApplicationDto application=createApplication();
  EventClassFamilyDto eventClassFamily=createEventClassFamily(application.getTenantId());
  createApplicationEventFamilyMap(application.getId(),eventClassFamily.getId(),1);
  List<EcfInfoDto> vacantEcfs=toGenericDtoList(client.getVacantEventClassFamiliesByApplicationId(application.getId()));
  Assert.assertNotNull(vacantEcfs);
  Assert.assertEquals(0,vacantEcfs.size());
  String schema=getResourceAsString(TEST_EVENT_CLASS_FAMILY_SCHEMA);
  client.addEventClassFamilySchema(eventClassFamily.getId(),schema,null);
  vacantEcfs=toGenericDtoList(client.getVacantEventClassFamiliesByApplicationId(application.getId()));
  Assert.assertNotNull(vacantEcfs);
  Assert.assertEquals(1,vacantEcfs.size());
  Assert.assertNotNull(vacantEcfs.get(0));
  Assert.assertEquals(eventClassFamily.getId(),vacantEcfs.get(0).getEcfId());
  Assert.assertEquals(eventClassFamily.getName(),vacantEcfs.get(0).getEcfName());
  Assert.assertEquals(2,vacantEcfs.get(0).getVersion());
}
