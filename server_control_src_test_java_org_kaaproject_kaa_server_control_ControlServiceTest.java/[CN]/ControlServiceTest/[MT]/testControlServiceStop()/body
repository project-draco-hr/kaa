{
  ControlServiceImpl controlService=controlServiceSpy();
  TThreadPoolServer server=Mockito.mock(TThreadPoolServer.class);
  Mockito.doNothing().when(server).serve();
  Mockito.doReturn(server).when(controlService).createServer(Mockito.any(TServerTransport.class),Mockito.any(ControlThriftService.Processor.class));
  controlService.start();
  Assert.assertTrue(controlService.started());
  controlService.stop();
  Assert.assertFalse(controlService.started());
  controlService.stop();
  Assert.assertFalse(controlService.started());
}
