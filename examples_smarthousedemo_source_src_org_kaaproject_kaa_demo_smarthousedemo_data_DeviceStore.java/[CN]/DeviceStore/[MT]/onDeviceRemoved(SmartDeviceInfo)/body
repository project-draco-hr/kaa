{
  List<SmartDeviceInfo> devices=deviceMap.get(device.getDeviceType());
  boolean removed=devices.remove(device);
  if (removed) {
    datasource.deleteDevice(device);
    DeviceRemoved deviceRemoved=new DeviceRemoved();
    deviceRemoved.device=device;
    eventBus.post(deviceRemoved);
  }
}
