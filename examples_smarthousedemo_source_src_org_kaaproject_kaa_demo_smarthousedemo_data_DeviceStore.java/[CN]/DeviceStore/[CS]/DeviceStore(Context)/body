{
  mContext=context;
  datasource=new DeviceDataSource(context);
  datasource.open();
  List<SmartDeviceInfo> devices=datasource.getAllDevices();
  for (  SmartDeviceInfo device : devices) {
    List<SmartDeviceInfo> typeDevices=deviceMap.get(device.getDeviceType());
    typeDevices.add(device);
  }
  eventBus.register(this);
}
