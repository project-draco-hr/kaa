{
  KaaMp3File song=library.getSong(songId);
  if (song == null) {
    LOG.error("Can't find song {} in music library",songId);
    throw new IllegalStateException("Can't find song " + songId + " in music library");
  }
  if (player == null) {
    return new Mp3Player(song.getFilename());
  }
  if (player.getFilePath().equals(song.getFilename())) {
    return player;
  }
  player.stop();
  return new Mp3Player(song.getFilename());
}
