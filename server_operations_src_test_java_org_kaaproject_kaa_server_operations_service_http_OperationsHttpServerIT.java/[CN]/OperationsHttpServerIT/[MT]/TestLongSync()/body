{
  logger.info("Test LongSync request");
  for (int i=0; i < NUMBER_OF_TESTS; i++) {
    sendLongSyncTest();
  }
  try {
synchronized (sync) {
      sync.wait(MAX_TEST_TIMEOUT);
    }
  }
 catch (  InterruptedException e) {
    e.printStackTrace();
  }
  for (  Integer id : longSyncTests.keySet()) {
    if (!longSyncTests.get(id).test()) {
      testFailed++;
      logger.trace("Long SYnc Test " + id + " failed.");
    }
  }
  assertEquals(0,testFailed);
}
