{
  NettySessionInfo session=message.getSessionInfo();
  crypt.setDecodedSessionKey(session.getSessionKey());
  byte[] response=responseConverter.toByteArray(message.getResponse());
  LOG.trace("Response data serialized");
  byte[] encodedResponse=crypt.encodeData(response);
  LOG.trace("Response data crypted");
  ChannelHandlerContext context=message.getSessionInfo().getCtx();
  ResponseBuilder converter=message.getResponseConverter();
  Object[] objects=converter.build(encodedResponse);
  if (objects != null && objects.length > 0) {
    for (    Object object : objects) {
      context.write(object);
    }
    context.flush();
  }
}
