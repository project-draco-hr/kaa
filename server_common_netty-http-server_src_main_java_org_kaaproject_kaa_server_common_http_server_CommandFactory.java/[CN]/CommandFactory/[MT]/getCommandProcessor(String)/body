{
  if (uri == null || uri.length() <= 0) {
    throw new Exception("URI parameter incorrect");
  }
  String[] params=uri.split("/");
  if (params.length < 3) {
    throw new Exception("URI parameter " + uri + " incorrect");
  }
  String command=params[2];
  LOG.trace("Command {} looking for URI {}",command,uri);
  if (commands.containsKey(command)) {
    LOG.trace("Command {} found",command);
    Class<?> c=commands.get(command);
    CommandProcessor cp=(CommandProcessor)c.newInstance();
    return cp;
  }
  LOG.warn("Requested command not found: {}",command);
  throw new Exception("Requested command not found");
}
