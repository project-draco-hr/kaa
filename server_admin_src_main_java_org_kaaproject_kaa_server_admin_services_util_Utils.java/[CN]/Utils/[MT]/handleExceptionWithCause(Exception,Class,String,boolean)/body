{
  if (logException) {
    logger.error("Unexpected exception catched!",exceptionWithCause);
  }
  Class causeClass=exceptionWithCause.getCause().getClass();
  if (exceptionWithCause instanceof KaaAdminServiceException) {
    return (KaaAdminServiceException)exceptionWithCause;
  }
 else   if (causeClass != null && causeClass.equals(expectedCauseClass)) {
    return new KaaAdminServiceException(errorMessage,ServiceErrorCode.GENERAL_ERROR);
  }
 else {
    return new KaaAdminServiceException(exceptionWithCause.getMessage(),ServiceErrorCode.GENERAL_ERROR);
  }
}
