{
  if (logException) {
    logger.error("Unexpected exception catched!",exceptionWithCause);
  }
  Throwable cause=exceptionWithCause.getCause();
  if (exceptionWithCause instanceof KaaAdminServiceException) {
    return (KaaAdminServiceException)exceptionWithCause;
  }
 else   if (cause != null && cause.getClass().equals(expectedCauseClass)) {
    return new KaaAdminServiceException(errorMessage,ServiceErrorCode.GENERAL_ERROR);
  }
 else {
    return new KaaAdminServiceException(exceptionWithCause.getMessage(),ServiceErrorCode.GENERAL_ERROR);
  }
}
