{
  String expected="{\"applicationToken\":\"test\",\"endpointPublicKeyHash\":\"\",\"profileBody\":\"\",\"acceptedUnicastNotifications\":null,\"topicStates\":null,\"versionInfo\":{\"configVersion\":1,\"profileVersion\":2,\"systemNfVersion\":1,\"userNfVersion\":1}}";
  ProfileUpdateRequest updateRequest=new ProfileUpdateRequest();
  updateRequest.setApplicationToken("test");
  updateRequest.setVersionInfo(new EndpointVersionInfo(1,2,1,1));
  updateRequest.setEndpointPublicKeyHash(ByteBuffer.wrap(new byte[0]));
  updateRequest.setProfileBody(ByteBuffer.wrap(new byte[0]));
  DatumWriter<GenericRecord> datumWriter=new GenericDatumWriter<GenericRecord>(updateRequest.getSchema());
  ByteArrayOutputStream encodedStream=new ByteArrayOutputStream();
  Encoder binaryEncoder=EncoderFactory.get().binaryEncoder(encodedStream,null);
  datumWriter.write(updateRequest,binaryEncoder);
  binaryEncoder.flush();
  encodedStream.flush();
  String actual=GenericAvroConverter.toJson(encodedStream.toByteArray(),updateRequest.getSchema().toString());
  Assert.assertEquals(expected,actual);
  BasicEndpointProfile bep=new BasicEndpointProfile();
  bep.setProfileBody("test2");
  GenericAvroConverter converter=new GenericAvroConverter(BasicEndpointProfile.SCHEMA$);
  System.out.println(converter.endcodeToJson(bep));
}
