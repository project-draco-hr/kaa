{
  try {
    if (isEmpty(tenantUser.getAuthority())) {
      tenantUser.setAuthority(KaaAuthorityDto.TENANT_ADMIN);
    }
 else     if (!KaaAuthorityDto.TENANT_ADMIN.equals(tenantUser.getAuthority())) {
      throw new KaaAdminServiceException("Incorrect authority for tenant. Authority must be TENANT_ADMIN.",ServiceErrorCode.INVALID_ARGUMENTS);
    }
    CreateUserResult result=userFacade.saveUserDto(tenantUser,passwordEncoder);
    tenantUser.setExternalUid(result.getUserId().toString());
    TenantUserDto tenant=tenantService.editTenant(tenantUser);
    if (StringUtils.isNotBlank(result.getPassword())) {
      tenant.setTempPassword(result.getPassword());
    }
    return tenant;
  }
 catch (  Exception e) {
    throw Utils.handleException(e);
  }
}
