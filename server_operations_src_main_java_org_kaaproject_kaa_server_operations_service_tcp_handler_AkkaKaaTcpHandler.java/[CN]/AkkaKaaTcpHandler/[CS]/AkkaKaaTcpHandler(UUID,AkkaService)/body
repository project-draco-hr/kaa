{
  this.uuid=uuid;
  this.akkaService=akkaService;
  this.connectResponseConverter=new ResponseBuilder(){
    volatile boolean connAckSent=false;
    @Override public Object[] build(    byte[] encriptedResponseData){
      if (!connAckSent) {
synchronized (this) {
          if (!connAckSent) {
            connAckSent=true;
            Object[] responses=new Object[2];
            responses[0]=new ConnAck(ReturnCode.ACCEPTED);
            responses[1]=new KaaSync(NOT_REQUEST,encriptedResponseData,NOT_ZIPPED,ENCRIPTED);
            LOG.debug("Sending {} response objects",responses.length);
            return responses;
          }
        }
      }
      return syncResponseConverter.build(encriptedResponseData);
    }
  }
;
}
