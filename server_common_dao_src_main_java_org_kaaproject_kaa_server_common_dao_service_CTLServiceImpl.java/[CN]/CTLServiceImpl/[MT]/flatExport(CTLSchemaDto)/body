{
  try {
    FileData result=new FileData();
    result.setContentType("application/json");
    result.setFileName(MessageFormat.format(CTL_EXPORT_TEMPLATE,schema.getMetaInfo().getFqn(),schema.getMetaInfo().getVersion()));
    String body=this.parseDependencies(schema,new Schema.Parser()).toString();
    Object json=FORMATTER.readValue(body,Object.class);
    result.setFileData(FORMATTER.writerWithDefaultPrettyPrinter().writeValueAsString(json).getBytes());
    return result;
  }
 catch (  Exception cause) {
    throw new RuntimeException("An unexpected exception occured: " + cause.toString());
  }
}
