{
  ObjectNode object=new ObjectMapper().readValue(schema.getBody(),ObjectNode.class);
  ArrayNode dependencies=(ArrayNode)object.get("dependencies");
  Map<String,Integer> versions=new HashMap<>();
  if (dependencies != null) {
    for (    JsonNode node : dependencies) {
      ObjectNode dependency=(ObjectNode)node;
      versions.put(dependency.get("fqn").getTextValue(),dependency.get("version").getIntValue());
    }
  }
  ArrayNode fields=(ArrayNode)object.get("fields");
  if (fields != null) {
    for (    JsonNode node : fields) {
      ObjectNode field=(ObjectNode)node;
      String type=field.get("type").getTextValue();
      ObjectNode value=this.inlineDependencies(this.findCTLSchemaByFqnAndVerAndTenantId(type,versions.get(type),schema.getTenantId()));
      field.put("type",value);
    }
  }
  return object;
}
