{
  EndpointGroupDto endpointGroup=createEndpointGroup();
  ProfileSchemaDto profileSchema1=createProfileSchema(endpointGroup.getApplicationId());
  ProfileSchemaDto profileSchema2=createProfileSchema(endpointGroup.getApplicationId());
  ProfileSchemaDto profileSchema3=createProfileSchema(endpointGroup.getApplicationId());
  createProfileFilter(profileSchema1.getId(),endpointGroup.getId());
  createProfileFilter(profileSchema2.getId(),endpointGroup.getId());
  List<SchemaDto> schemas=client.getVacantProfileSchemasByEndpointGroupId(endpointGroup.getId());
  Assert.assertNotNull(schemas);
  Assert.assertEquals(2,schemas.size());
  Collections.sort(schemas,new Comparator<SchemaDto>(){
    @Override public int compare(    SchemaDto o1,    SchemaDto o2){
      int result=o1.getMajorVersion() - o2.getMajorVersion();
      if (result == 0) {
        result=o1.getMinorVersion() - o2.getMinorVersion();
      }
      return result;
    }
  }
);
  SchemaDto schema=schemas.get(1);
  Assert.assertNotNull(schema);
  Assert.assertEquals(profileSchema3.getId(),schema.getId());
  Assert.assertEquals(profileSchema3.getMajorVersion(),schema.getMajorVersion());
  Assert.assertEquals(profileSchema3.getMinorVersion(),schema.getMinorVersion());
}
