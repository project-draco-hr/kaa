{
  EndpointGroupDto endpointGroup=createEndpointGroup();
  CTLSchemaInfoDto ctlSchema=this.createCTLSchema(this.ctlRandomFieldType(),CTL_DEFAULT_NAMESPACE,1,CTLSchemaScopeDto.TENANT,null,null,null);
  ProfileSchemaDto profileSchema1=createProfileSchema(endpointGroup.getApplicationId(),ctlSchema.getId());
  ProfileSchemaDto profileSchema2=createProfileSchema(endpointGroup.getApplicationId(),ctlSchema.getId());
  ProfileSchemaDto profileSchema3=createProfileSchema(endpointGroup.getApplicationId(),ctlSchema.getId());
  createProfileFilter(profileSchema1.getId(),endpointGroup.getId());
  createProfileFilter(profileSchema2.getId(),endpointGroup.getId());
  List<VersionDto> schemas=client.getVacantProfileSchemasByEndpointGroupId(endpointGroup.getId());
  Assert.assertNotNull(schemas);
  Assert.assertEquals(2,schemas.size());
  Collections.sort(schemas);
  VersionDto schema=schemas.get(1);
  Assert.assertNotNull(schema);
  Assert.assertEquals(profileSchema3.getId(),schema.getId());
  Assert.assertEquals(profileSchema3.getVersion(),schema.getVersion());
}
