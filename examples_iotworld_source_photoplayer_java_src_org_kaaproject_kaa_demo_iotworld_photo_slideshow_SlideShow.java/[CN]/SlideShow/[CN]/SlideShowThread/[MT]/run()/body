{
  panel=new SlideShowPanel();
  panel.setBackground(frame.getBackground());
  panel.setSize(frame.getWidth(),frame.getHeight());
  frame.add(panel);
  listener.onSlideshowUpdated();
  while (!stopped) {
    try {
      if (paused) {
        Thread.sleep(100);
        continue;
      }
      LOG.info("Scheduling preview generation for next slide: {}",getNextIndex());
      repaint(panel,1.0f,currentImage,nextImage);
      listener.onSlideshowUpdated();
      buildPreview(getNextIndex(),SlideShow.this);
      Thread.sleep(IMAGE_TIMEOUT);
      while (nextImage == null) {
        LOG.info("Waiting for next preview to be generated");
        Thread.sleep(WAIT_FOR_PREVIEW_SLEEP_TIME);
      }
      currentIndex=getNextIndex();
      currentImage=nextImage;
      currentImageThumbnail=nextImageThumbnail;
      nextImage=null;
    }
 catch (    InterruptedException e) {
      LOG.warn("Slideshow thread interrupted",e);
    }
  }
}
