{
  if (mOperationMode != null) {
    final OperationMode prevOperationMode=mOperationMode;
    AlertDialog.Builder builder=new AlertDialog.Builder(context);
    builder.setTitle(R.string.change_device_mode);
    final Spinner spinner=new Spinner(context);
    String[] values=context.getResources().getStringArray(R.array.geofencing_status);
    ArrayAdapter<String> spinnerArrayAdapter=new ArrayAdapter<String>(context,android.R.layout.simple_spinner_item,values);
    spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(spinnerArrayAdapter);
    spinner.setSelection(mOperationMode.ordinal());
    builder.setView(spinner);
    builder.setPositiveButton(R.string.change_mode,new DialogInterface.OnClickListener(){
      @Override public void onClick(      DialogInterface dialog,      int which){
        OperationMode newOperationMode=OperationMode.values()[spinner.getSelectedItemPosition()];
        if (newOperationMode != prevOperationMode) {
          changeOperationMode(newOperationMode);
        }
      }
    }
);
    builder.setNegativeButton(R.string.cancel,new DialogInterface.OnClickListener(){
      @Override public void onClick(      DialogInterface dialog,      int which){
        dialog.cancel();
      }
    }
);
    builder.show();
  }
}
