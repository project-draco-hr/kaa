{
  System.setProperty(KaaClientProperties.KAA_CLIENT_PROPERTIES_FILE,"client-test.properties");
  DesktopKaaClient clientSpy=Mockito.spy(new DesktopKaaClient());
  ProfileContainer profileContainerMock=Mockito.mock(ProfileContainer.class);
  clientSpy.setProfileContainer(profileContainerMock);
  Mockito.when(profileContainerMock.getProfile()).thenReturn(new Profile());
  clientSpy.start();
  Thread.sleep(5000L);
  clientSpy.stop();
  Assert.assertNotNull(clientSpy.getConfigurationManager());
  Assert.assertNotNull(clientSpy.getConfigurationPersistenceManager());
  Assert.assertNotNull(clientSpy.getDeltaManager());
  Assert.assertNotNull(clientSpy.getNotificationManager());
  Assert.assertNotNull(clientSpy.getSchemaPersistenceManager());
}
