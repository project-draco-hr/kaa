{
  KaaClientState state=mock(KaaClientState.class);
  when(state.getEndpointAccessToken()).thenReturn("token1");
  DefaultEndpointRegistrationManager manager=spy(new DefaultEndpointRegistrationManager(state,null,null));
  String accessToken1=manager.getEndpointAccessToken();
  manager.regenerateEndpointAccessToken();
  String accessToken2=manager.getEndpointAccessToken();
  assertNotEquals("Endpoint access token is same after regeneration!",accessToken1,accessToken2);
}
