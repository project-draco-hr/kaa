{
  LOG.info("Data collection demo started");
  LOG.info("--= Press any key to exit =--");
  KaaClient kaaClient=Kaa.newClient(new DesktopKaaPlatformContext(),new SimpleKaaClientStateListener(){
    @Override public void onStarted(){
      LOG.info("Kaa client started");
    }
    @Override public void onStopped(){
      LOG.info("Kaa client stopped");
    }
  }
);
  kaaClient.setLogUploadStrategy(new DefaultLogUploadStrategy(){
    @Override public LogUploadStrategyDecision isUploadNeeded(    LogStorageStatus status){
      return status.getRecordCount() >= 1 ? UPLOAD : NOOP;
    }
  }
);
  kaaClient.start();
  for (  LogData log : generateLogs(LOGS_TO_SEND_COUNT)) {
    kaaClient.addLogRecord(log);
    LOG.info("Log record {} sent",log.toString());
  }
  try {
    System.in.read();
  }
 catch (  IOException e) {
    LOG.error("IOException was caught",e);
  }
  kaaClient.stop();
  LOG.info("Data collection demo stopped");
}
