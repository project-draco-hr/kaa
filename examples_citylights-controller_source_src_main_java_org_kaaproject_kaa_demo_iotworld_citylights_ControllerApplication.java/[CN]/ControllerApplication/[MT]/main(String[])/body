{
  LOG.info("Starting kaa client");
  kaaClient.start();
  LOG.info("Starting service");
  String host="localhost";
  int port=10001;
  if (args.length == 2) {
    host=args[0];
    port=Integer.valueOf(args[1]);
  }
  final ResourceConfig rc=new ResourceConfig().packages("org.kaaproject.kaa.demo.iotworld.citylights.resources");
  rc.register(JacksonFeature.class);
  rc.register(SimpleMapperProvider.class);
  HttpServer server=GrizzlyHttpServerFactory.createHttpServer(buildURL(host,port),rc,false);
  server.start();
  ControllerResource.startSwitchTimer();
  System.in.read();
  kaaClient.stop();
  server.shutdownNow();
  executor.shutdownNow();
}
