{
  TrafficLightsConfiguration trafficConfig=configuration.getTrafficLightsConfiguration();
  Set<String> allowTags=toTags(trafficConfig.getMainRoadAllowTags());
  if (allowTags.contains(tag)) {
    LOG.info("This is trafficLights allow tag!");
    if (!trafficState.isCarPending()) {
      trafficState.setCarPending(true);
      if (!trafficState.isPedestrianPending()) {
        updateTrafficLightsState(configuration.getKaaClientConfiguration(),ALLOW);
      }
 else {
        LOG.info("Can't allow car movement yet. Pedestrian is on his way!");
      }
    }
 else {
      LOG.info("Traffic state is already in \"car pending\" state!");
    }
  }
 else {
    LOG.info("Car is outside the traffic light zone!");
    if (trafficState.isCarPending()) {
      updateTrafficLightsState(configuration.getKaaClientConfiguration(),DISALLOW);
      trafficState.setCarPending(false);
      if (trafficState.isPedestrianPending()) {
        processPedestrianWalkRequest();
      }
 else {
        startSwitchTimer();
      }
    }
  }
}
