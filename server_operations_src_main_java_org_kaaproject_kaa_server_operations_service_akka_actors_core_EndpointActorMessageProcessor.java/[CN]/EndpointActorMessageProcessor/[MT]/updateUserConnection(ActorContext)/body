{
  if (userId != null && !userId.equals(endpointProfile.getEndpointUserId())) {
    sendDisconnectFromOldUser(context,endpointProfile);
    userRegistrationRequestSent=false;
  }
  if (!userRegistrationRequestSent) {
    userId=endpointProfile.getEndpointUserId();
    if (userId != null) {
      sendConnectToNewUser(context,endpointProfile);
      userRegistrationRequestSent=true;
    }
  }
 else {
    LOG.trace("[{}][{}] User registration request is already sent.",endpointKey,actorKey);
  }
}
