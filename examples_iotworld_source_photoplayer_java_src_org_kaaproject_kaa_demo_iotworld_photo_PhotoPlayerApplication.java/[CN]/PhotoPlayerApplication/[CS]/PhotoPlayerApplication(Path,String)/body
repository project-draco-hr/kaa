{
  super();
  this.accessCode=accessCode;
  this.rootPath=rootPath;
  this.library=new PhotoLibrary(rootPath);
  this.client=Kaa.newClient(new DesktopKaaPlatformContext(),new SimpleKaaClientStateListener(){
    @Override public void onStarted(){
      LOG.info("Kaa client started");
      client.attachUser(DEFAULT_USER_NAME,"",new UserAttachCallback(){
        @Override public void onAttachResult(        UserAttachResponse arg0){
          LOG.info("Endpoint attached to default user: {}",DEFAULT_USER_NAME);
        }
      }
);
    }
  }
);
  EventFamilyFactory factory=client.getEventFamilyFactory();
  this.deviceECF=factory.getDeviceEventClassFamily();
  this.photoECF=factory.getPhotoEventClassFamily();
  this.geoECF=factory.getGeoFencingEventClassFamily();
  this.state=new PhotoPlayerState(STATE_FILE_NAME);
  frame=new SlideShowFrame();
  frame.validate();
  GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().setFullScreenWindow(frame);
}
