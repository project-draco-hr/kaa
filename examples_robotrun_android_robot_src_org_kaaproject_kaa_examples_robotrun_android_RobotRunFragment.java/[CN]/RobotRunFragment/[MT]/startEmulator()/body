{
  updateStatus(RobotRunStatus.SETTING_UP);
  File labyrinthFile=new File(Environment.getExternalStorageDirectory(),"labyrinth.data");
  Labyrinth labyrinth=tryReadEmulatorLabyrinth(labyrinthFile);
  if (labyrinth == null) {
    showError("Unable to load labyrinth from file:\n" + labyrinthFile.getAbsolutePath());
    stop();
  }
 else {
    int startX=getStartX();
    int startY=getStartY();
    Direction startDirection=getStartDirection();
    Cell startCell=labyrinth.getCell(startX,startY);
    Properties robotProperties=new Properties();
    robotProperties.put(RobotEmulator.PROPERTY_NAME_COMMAND_TIMEOUT,"" + RobotEmulator.DEFAULT_COMMAND_TIMEOUT / 5);
    robotProperties.put(RobotEmulator.PROPERTY_NAME_COMMAND_TIMEOUT_DEVIATION,"" + RobotEmulator.DEFAULT_COMMAND_TIMEOUT_DEVIATION / 5);
    robotProperties.put(RobotEmulator.PROPERTY_NAME_PING_TIMEOUT,"" + RobotEmulator.DEFAULT_PING_TIMEOUT / 5);
    try {
      launcher=new AndroidEmulatorLauncher(this,getActivity(),labyrinth,startCell,startDirection,"android emulated bot",robotProperties);
    }
 catch (    Exception e) {
      LOG.error("Failed to create emulator launcher!",e);
      showError("Failed to create emulator launcher!\n" + e.getMessage());
      stop();
    }
    if (launcher != null) {
      robotType=RobotType.EMULATOR;
      startLauncher();
    }
  }
}
