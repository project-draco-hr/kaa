{
  LogAppenderDto logAppender=null;
  ApplicationDto app=null;
  LogSchemaDto schema=null;
  if (isBlank(appId)) {
    app=generateApplication();
    appId=app.getId();
  }
 else {
    app=applicationService.findAppById(appId);
  }
  if (isBlank(schemaId)) {
    schema=generateLogSchema(appId,1).get(0);
    schemaId=schema.getId();
  }
  logAppender=new LogAppenderDto();
  logAppender.setApplicationId(appId);
  logAppender.setName("Generated Appender");
  logAppender.setSchema(new SchemaDto(schemaId,schema.getMajorVersion(),schema.getMinorVersion()));
  logAppender.setTenantId(app.getTenantId());
  logAppender.setStatus(status != null ? status : LogAppenderStatusDto.REGISTERED);
  logAppender.setHeaderStructure(Arrays.asList(LogHeaderStructureDto.values()));
  return logAppendersService.saveLogAppender(logAppender);
}
