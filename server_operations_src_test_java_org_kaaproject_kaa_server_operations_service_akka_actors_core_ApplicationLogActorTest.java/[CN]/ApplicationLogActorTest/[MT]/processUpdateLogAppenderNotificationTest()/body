{
  LogAppender flumeAppender=mock(LogAppender.class);
  when(flumeAppender.getName()).thenReturn("Flume");
  when(flumeAppender.getAppenderId()).thenReturn(APPENDER_ID);
  Notification notification=new Notification();
  notification.setAppenderId(APPENDER_ID);
  notification.setAppId(APPLICATION_ID);
  notification.setOp(Operation.UPDATE_LOG_APPENDER);
  List<LogAppender> appenders=mock(List.class);
  ReflectionTestUtils.setField(applicationLogActor,"logAppenders",appenders);
  when(appenders.size()).thenReturn(1);
  when(appenders.get(any(Integer.class))).thenReturn(flumeAppender);
  when(logAppenderService.getApplicationAppender(APPENDER_ID)).thenReturn(flumeAppender);
  ReflectionTestUtils.invokeMethod(applicationLogActor,"processLogAppenderNotification",notification);
  verify(logAppenderService,times(1)).getApplicationAppender(APPENDER_ID);
  verify(appenders,times(1)).remove(0);
  verify(appenders,times(1)).add(any(LogAppender.class));
  ReflectionTestUtils.setField(applicationLogActor,"logAppenders",logAppenders);
}
