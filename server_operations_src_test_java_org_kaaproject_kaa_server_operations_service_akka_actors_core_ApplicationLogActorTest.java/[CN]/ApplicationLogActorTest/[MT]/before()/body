{
  logAppenderService=mock(LogAppenderService.class);
  applicationService=mock(ApplicationService.class);
  applicationDto=mock(ApplicationDto.class);
  LogSchemaDto logSchemaDto=new LogSchemaDto();
  logSchemaDto.setMajorVersion(TEST_SCHEMA_VERSION);
  logSchema=new LogSchema(logSchemaDto);
  logAppenders=new ArrayList<>();
  logAppender=mock(LogAppender.class);
  logAppenders.add(logAppender);
  when(logAppenderService.getLogSchema(APPLICATION_ID,LOG_SCHEMA_VERSION)).thenReturn(logSchema);
  when(applicationService.findAppByApplicationToken(APP_TOKEN)).thenReturn(applicationDto);
  when(applicationDto.getId()).thenReturn(APPLICATION_ID);
  when(logAppenderService.getApplicationAppenders(APPLICATION_ID)).thenReturn(logAppenders);
  when(logAppender.isSchemaVersionSupported(Mockito.anyInt())).thenReturn(Boolean.TRUE);
}
