{
  mPreferences=preferences;
  mClient=client;
  mEventBus=eventBus;
  mDeviceEventClassFamily=mClient.getEventFamilyFactory().getDeviceEventClassFamily();
  mGeoFencingEventClassFamily=mClient.getEventFamilyFactory().getGeoFencingEventClassFamily();
  mThermoEventClassFamily=mClient.getEventFamilyFactory().getThermoEventClassFamily();
  loadDeviceState();
  mEventBus.register(this);
  mDeviceEventClassFamily.addListener(this);
  mGeoFencingEventClassFamily.addListener(this);
  mThermoEventClassFamily.addListener(this);
  new Thread(mThermoSimulator).start();
}
