{
  EndpointProfileDto endpointProfile=state.getProfile();
  if (endpointProfile != null) {
    CTLDataDto serverProfileDto=operationsService.getServerEndpointProfile(key);
    if (serverProfileDto != null) {
      endpointProfile.setServerProfileVersion(serverProfileDto.getServerProfileVersion());
      endpointProfile.setServerProfileBody(serverProfileDto.getBody());
    }
 else {
      endpointProfile.setServerProfileVersion(0);
      endpointProfile.setServerProfileBody("");
    }
    state.setProfile(endpointProfile);
    processThriftNotification(context);
  }
 else {
    LOG.warn("[{}][{}] Can't update server profile for an empty state",endpointKey,actorKey);
  }
}
