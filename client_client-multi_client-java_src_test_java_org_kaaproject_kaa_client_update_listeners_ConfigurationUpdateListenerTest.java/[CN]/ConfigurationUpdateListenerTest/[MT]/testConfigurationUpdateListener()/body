{
  ConfigurationProcessor configurationProcessor=mock(ConfigurationProcessor.class);
  SchemaProcessor schemaProcessor=mock(SchemaProcessor.class);
  ConfigurationHashContainer hashContainer=mock(ConfigurationHashContainer.class);
  KaaClientState clientState=mock(KaaClientState.class);
  ConfigurationUpdateListener listener=new ConfigurationUpdateListener(configurationProcessor,schemaProcessor,hashContainer,clientState);
  SyncResponse response=new SyncResponse();
  response.setResponseType(SyncResponseStatus.CONF_RESYNC);
  listener.onDeltaUpdate(response);
  ConfSyncResponse confResponse=new ConfSyncResponse();
  response.setConfSyncResponse(confResponse);
  listener.onDeltaUpdate(response);
  confResponse.setConfDeltaBody(ByteBuffer.wrap(new byte[]{1,2,3}));
  confResponse.setConfSchemaBody(ByteBuffer.wrap(new byte[]{1,2,3}));
  response.setResponseType(SyncResponseStatus.DELTA);
  listener.onDeltaUpdate(response);
  verify(configurationProcessor,times(1)).processConfigurationData(any(ByteBuffer.class),any(Boolean.class));
  verify(schemaProcessor,times(1)).loadSchema(any(ByteBuffer.class));
  verify(hashContainer,times(1)).getConfigurationHash();
  verify(clientState,times(1)).setConfigurationHash(any(EndpointObjectHash.class));
}
