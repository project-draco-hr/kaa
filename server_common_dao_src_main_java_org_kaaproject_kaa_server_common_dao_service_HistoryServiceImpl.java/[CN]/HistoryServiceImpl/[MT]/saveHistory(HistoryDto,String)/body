{
  HistoryDto savedDto=null;
  try {
    History savedHistory=saveHistoryAndIncrementSeqNum(historyDto,appId);
    if (savedHistory != null) {
      savedDto=savedHistory.toDto();
    }
  }
 catch (  MongoException.DuplicateKey ex) {
    LOG.debug("Catch duplicate key exception with id: [{}]",historyDto.getId());
    savedDto=saveHistory(historyDto,appId);
  }
  return savedDto;
}
