{
  History saved=null;
  Application application=getNextSequenceNumber(applicationId);
  if (application != null && application.getUpdate() != null) {
    Update update=application.getUpdate();
    int sequenceNumber=update.getSequenceNumber();
    historyDto.setId(getId(applicationId,sequenceNumber));
    historyDto.setSequenceNumber(sequenceNumber);
    historyDto.setLastModifyTime(System.currentTimeMillis());
    saved=historyDao.save(new History(historyDto));
    if (saved != null) {
      applicationDao.updateSeqNumber(applicationId);
    }
 else {
      LOG.debug("Can't save history with id [{}] .",historyDto.getId());
    }
  }
 else {
    LOG.debug("Can't get sequence number for application id [{}] .",applicationId);
  }
  return saved;
}
