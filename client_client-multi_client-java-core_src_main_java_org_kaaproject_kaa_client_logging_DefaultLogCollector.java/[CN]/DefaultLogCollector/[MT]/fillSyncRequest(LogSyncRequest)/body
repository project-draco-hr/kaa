{
  if (isUploading) {
    LogBlock group=storage.getRecordBlock(configuration.getBatchVolume());
    if (group != null) {
      List<LogRecord> recordList=group.getRecords();
      LOG.info("Sending {} log records",recordList.size());
      if (!recordList.isEmpty()) {
        List<LogEntry> logs=new LinkedList<>();
        for (        LogRecord record : recordList) {
          logs.add(new LogEntry(ByteBuffer.wrap(record.getData())));
        }
        request.setRequestId(group.getBlockId());
        request.setLogEntries(logs);
      }
    }
 else {
      LOG.warn("Log group is null: storage is empty or log group size is too small");
    }
  }
 else {
    LOG.info("Skiping log upload");
  }
}
