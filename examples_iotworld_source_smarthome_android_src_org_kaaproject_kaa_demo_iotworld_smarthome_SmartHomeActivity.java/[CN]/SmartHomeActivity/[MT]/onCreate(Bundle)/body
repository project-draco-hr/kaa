{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_smarthome);
  mToolbar=(SmartHomeToolbar)findViewById(R.id.smart_home_toolbar);
  setSupportActionBar(mToolbar.getToolbar());
  mMainLayout=(DrawerLayout)findViewById(R.id.main_layout);
  mToggle=new ActionBarDrawerToggle(this,mMainLayout,R.string.navigation_drawer_open,R.string.navigation_drawer_close){
    @Override public void onDrawerClosed(    View drawerView){
      super.onDrawerClosed(drawerView);
      mNavAdapter.setMode(NavAdapter.MODE_MAIN);
    }
  }
;
  mMainLayout.setDrawerListener(mToggle);
  mRecyclerView=(RecyclerView)findViewById(R.id.recycler_view);
  mRecyclerView.setHasFixedSize(true);
  mNavAdapter=new NavAdapter(mRecyclerView,this);
  mLayoutManager=new LinearLayoutManager(this);
  mRecyclerView.setLayoutManager(mLayoutManager);
  if (savedInstanceState == null) {
    if (!getSmartHomeApplication().isKaaStarted()) {
      showWait();
    }
 else     if (!getController().isUserAttached()) {
      showLogin();
    }
 else {
      showHome();
    }
  }
}
