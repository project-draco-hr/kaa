{
  checkAuthority(KaaAuthorityDto.KAA_ADMIN);
  try {
    checkTenantName(tenantUser);
    Long userId=saveUser(tenantUser);
    tenantUser.setExternalUid(userId.toString());
    TenantAdminDto tenantAdmin=new TenantAdminDto();
    TenantDto tenant=new TenantDto();
    tenant.setId(tenantUser.getTenantId());
    tenant.setName(tenantUser.getTenantName());
    tenantAdmin.setTenant(tenant);
    tenantAdmin.setUserId(tenantUser.getId());
    tenantAdmin.setUsername(tenantUser.getUsername());
    tenantAdmin.setExternalUid(userId.toString());
    TenantAdminDto savedTenantAdmin=toDto(clientProvider.getClient().editTenantAdmin(toDataStruct(tenantAdmin)));
    return toTenantUser(savedTenantAdmin);
  }
 catch (  Exception e) {
    throw Utils.handleException(e);
  }
}
