{
  float newVolume=volume / MAX_VOLUME;
  LinkedList<Line> speakers=new LinkedList<Line>();
  Mixer.Info[] mixers=AudioSystem.getMixerInfo();
  for (  Mixer.Info mixerInfo : mixers) {
    Mixer mixer=AudioSystem.getMixer(mixerInfo);
    Line.Info[] lines=mixer.getTargetLineInfo();
    for (    Line.Info info : lines) {
      try {
        Line line=mixer.getLine(info);
        speakers.add(line);
      }
 catch (      Exception e) {
        LOG.trace("Failed to get line",e);
      }
    }
  }
  for (  Line line : speakers) {
    try {
      boolean opened=line.isOpen() || line instanceof Clip;
      if (!opened) {
        line.open();
      }
      FloatControl control=(FloatControl)line.getControl(FloatControl.Type.VOLUME);
      control.setValue(control.getMaximum() * newVolume);
    }
 catch (    Exception e) {
      LOG.trace("Failed to change line volume",e);
    }
  }
  player.setCurrentVolume(newVolume);
}
