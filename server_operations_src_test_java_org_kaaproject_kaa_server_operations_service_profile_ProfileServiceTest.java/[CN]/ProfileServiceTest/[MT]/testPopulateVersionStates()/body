{
  EventClassFamilyVersionInfo ecf1=new EventClassFamilyVersionInfo("ecf1",7);
  EventClassFamilyVersionInfo ecf2=new EventClassFamilyVersionInfo("ecf2",8);
  EndpointVersionInfo evInfo=new EndpointVersionInfo(1,2,3,4,Arrays.asList(ecf1,ecf2),5);
  EndpointProfileDto dtoMock=Mockito.mock(EndpointProfileDto.class);
  EventClassFamilyIdKey key=new EventClassFamilyIdKey("tenantId","ecf1");
  Mockito.when(cacheService.getEventClassFamilyIdByName(key)).thenReturn("ecf1Id");
  testService.populateVersionStates("tenantId",dtoMock,evInfo);
  EventClassFamilyVersionStateDto ecfVersionStateDto=new EventClassFamilyVersionStateDto();
  ecfVersionStateDto.setEcfId("ecf1Id");
  ecfVersionStateDto.setVersion(7);
  Mockito.verify(dtoMock).setEcfVersionStates(Collections.singletonList(ecfVersionStateDto));
}
