{
  EndpointNotificationDto personaNotification=new EndpointNotificationDto();
  personaNotification.setEndpointKeyHash(keyHash);
  NotificationDto notification=new NotificationDto();
  notification.setTopicId(topicId);
  notification.setBody("{\"notificationBody\":\"dummy\", \"systemNotificationParam1\":42, \"systemNotificationParam2\":43}".getBytes());
  if (strIsEmpty(appId)) {
    ApplicationDto applicationDto=createApplication();
    notification.setApplicationId(applicationDto.getId());
  }
 else {
    notification.setApplicationId(appId);
  }
  if (strIsEmpty(schemaId)) {
    NotificationSchemaDto schema=createNotificationSchema(appId,type);
    notification.setSchemaId(schema.getId());
  }
 else {
    notification.setSchemaId(schemaId);
  }
  personaNotification.setNotificationDto(notification);
  EndpointNotificationDto savedUnicast=toDto(client.editUnicastNotification(toDataStruct(personaNotification)));
  return savedUnicast;
}
