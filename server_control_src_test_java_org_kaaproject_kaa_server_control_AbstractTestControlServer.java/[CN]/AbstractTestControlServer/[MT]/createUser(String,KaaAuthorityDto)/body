{
  UserDto user=new UserDto();
  user.setExternalUid(UUID.randomUUID().toString());
  user.setUsername(generateString("user"));
  user.setAuthority(authority);
  if (strIsEmpty(tenantId)) {
    TenantDto tenant=createTenant();
    user.setTenantId(tenant.getId());
  }
 else {
    user.setTenantId(tenantId);
  }
  UserDto savedUser=toDto(client.editUser(toDataStruct(user)));
  return savedUser;
}
