{
  if (!closed) {
    Event event=flumeEventBuilder.generateEvent(logEventPack,header,getApplicationToken());
    try {
      if (flumeClientManger != null) {
        flumeClientManger.sendEventToFlume(event);
        listener.onSuccess();
      }
 else {
        LOG.warn("Flume client wasn't initialized. Invoke method init before.");
        listener.onInternalError();
      }
    }
 catch (    EventDeliveryException e) {
      LOG.warn("Can't send flume event.");
      listener.onConnectionError();
    }
  }
 else {
    LOG.info("Attempted to append to closed appender named [{}].",getName());
    listener.onInternalError();
  }
}
