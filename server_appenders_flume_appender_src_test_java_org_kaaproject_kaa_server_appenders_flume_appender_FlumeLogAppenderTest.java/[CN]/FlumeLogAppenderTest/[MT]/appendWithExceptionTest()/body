{
  LogEventPack eventPack=new LogEventPack();
  doThrow(new EventDeliveryException()).when(flumeClientManger).sendEventToFlume(null);
  TestLogDeliveryCallback callback=new TestLogDeliveryCallback();
  appender.doAppend(eventPack,callback);
  Assert.assertTrue(callback.connectionError);
}
